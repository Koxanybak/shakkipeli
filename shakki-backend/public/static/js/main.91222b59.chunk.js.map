{"version":3,"sources":["sprites/blackking.svg","sprites/blackqueen.svg","sprites/blackrook.svg","sprites/blackbishop.svg","sprites/blackknight.svg","sprites/blackpawn.svg","sprites/whiteking.svg","sprites/whitequeen.svg","sprites/whiterook.svg","sprites/whitebishop.svg","sprites/whiteknight.svg","sprites/whitepawn.svg","components/Footer.js","queries.js","index.js","utils/errorHandlers.js","utils/stateHooks.js","components/LoginForm.js","components/Menu.js","components/RegisterForm.js","components/GameMenu.js","components/chess/pieces.js","components/chess/Square.js","utils/constants.js","components/chess/Board.js","components/chess/GameText.js","components/chess/LastMove.js","components/chess/gameUtils.js","components/chess/GameButtons.js","components/chess/Game.js","App.js"],"names":["module","exports","Footer","className","wsUri","LOCATION","gql","IDLE_PIECE","MOVED_PIECE","MOVE_HISTORY_ENTRY","GAME_STATE_DETAILS","GET_GAME","SKIP_TURN","GAME_STATE_UPDATED","JOIN_GAME","PROMOTE","MAKE_MOVE","CREATE_GAME","GET_LOGGED_USER","LOGIN","ADD_USER","handleApolloError","err","graphQLErrors","console","log","message","stack","useUser","client","useApolloClient","useState","token","setToken","useLazyQuery","variables","window","localStorage","getItem","sessionStorage","onCompleted","data","setUser","getLoggedUser","onError","getUser","useQuery","loading","error","removeUser","useCallback","removeItem","user","remember","newUserData","setItem","writeQuery","query","useEffect","userDataInStore","readQuery","userLoading","userError","LoginForm","username","setUsername","password","setPassword","setRemember","history","useHistory","useMutation","login","loginResult","push","onSubmit","event","preventDefault","TextField","label","onChange","e","target","value","name","type","FormControlLabel","control","Checkbox","checked","color","Button","variant","onClick","Menu","AppBar","position","Toolbar","IconButton","edge","aria-label","component","Link","to","RegisterForm","confirmation","setConfirmation","tag","setTag","alert","addUser","addedResult","length","helperText","required","style","paddingTop","paddingBottom","GameMenu","link","setLink","createGame","createResult","id","location","href","pieceStyle","width","height","verticalAlign","getImgSrc","side","blackKing","blackQueen","blackBishop","blackRook","blackKnight","blackPawn","whiteKing","whiteQueen","whiteBishop","whiteRook","whiteKnight","whitePawn","Piece","opacity","draggable","src","alt","King","kingStyle","Queen","queenStyle","Rook","rookStyle","Knight","knightStyle","Bishop","bishopStyle","Pawn","pawnStyle","Square","makeMove","piece","dragHelperMap","highlight","specificColor","useMemo","squareColor","setSquareColor","pieceToRender","squareStyle","backgroundColor","textAlign","background","row","column","Board","boardAlignment","board","handleClick","chosenPiece","Map","forEach","i","j","set","squares","Array","from","boardStyle","SQUARE_SIZE","borderStyle","borderColor","borderWidth","cellSpacing","map","key","availableMoves","move","newLocation","useStyles","makeStyles","turnText","padding","GameText","game","check","currentPlayer","gameOver","promotionPlayerID","winner","promote","classes","Paper","threatenedPlayer","getLocation","Move","emphasize","emphasizeStyle","borderLeftStyle","borderLeftWidth","moveStyle","margin","undefined","__typename","promotedPiece","promotedTo","MoveHistory","moveHistory","overflowY","index","LastMove","showAll","setShowAll","lastMove","Typography","isNotValid","squareNode","pieceToMove","clickedPiece","isValidPiece","whitePlayer","GameButtons","skipTurn","disabled","size","Game","useParams","setGame","newGameData","gameDataInStore","gameId","getGame","gameStateUpdated","initialResult","joinGame","useSubscription","onSubscriptionData","subscriptionData","gameLoading","gameError","pieceType","oldLocation","useGame","setPieceToMove","toString","blackPlayer","a","clickedElem","Math","floor","Number","parentNode","res","success","clickedPieceElem","firstChild","Grid","container","direction","justify","spacing","wrap","item","xs","lg","alignItems","root","App","Container","path","authLink","setContext","_","headers","authorization","loc","protocol","host","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","splitLink","split","definition","getMainDefinition","kind","operation","concat","ApolloClient","cache","InMemoryCache","connectToDevTools","ReactDOM","render","ApolloProvider","document","getElementById"],"mappings":"6GAAAA,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oJCU5BC,EARA,WACb,OACE,yBAAKC,UAAU,UAAf,0G,4kICAJ,ICgB2BC,EDhBrBC,EAAWC,YAAH,KAORC,EAAaD,YAAH,IAQZD,GAGEG,EAAcF,YAAH,IAQbD,GAGEI,EAAqBH,YAAH,KAOlBI,EAAqBJ,YAAH,IA2DpBD,EACAE,EACAC,EACAC,GAkDSE,EAAWL,YAAH,IAQjBI,GAGSE,EAAYN,YAAH,IAQlBI,GAGSG,EAAqBP,YAAH,IAQ3BI,GAGSI,EAAYR,YAAH,IAQlBI,GAGSK,EAAUT,YAAH,IAShBI,GAGSM,EAAYV,YAAH,KAaTW,EAAcX,YAAH,KAaXY,EAAkBZ,YAAH,KAiBfa,EAAQb,YAAH,KAkBLc,EAAWd,YAAH,K,8CE7QRe,GAAoB,SAAAC,GAC1BA,EAAIC,eAAkBD,EAAIC,cAAc,IAM3CC,QAAQC,IAAIH,EAAIC,cAAc,GAAGG,SAC7BJ,EAAIC,cAAc,GAAGI,OACvBH,QAAQC,IAAIH,EAAIC,cAAc,GAAGI,SAPnCH,QAAQC,IAAIH,EAAII,SACZJ,EAAIK,OACNH,QAAQC,IAAIH,EAAIK,SCuFTC,GAAU,WACrB,IAAMC,EAASC,cADY,EAEDC,mBAAS,MAFR,mBAEpBC,EAFoB,KAEbC,EAFa,OAKTC,aAAahB,EAAiB,CAC9CiB,UAAW,CACTH,MAAOI,OAAOC,aAAaC,QAAQ,mBAC/BF,OAAOC,aAAaC,QAAQ,mBAC5BF,OAAOG,eAAeD,QAAQ,oBAEpCE,YAAa,SAAAC,GACXC,EAAQD,EAAKE,gBAEfC,QAAS,SAAAtB,GACPD,GAAkBC,MAVfuB,EALoB,sBAoBMC,YAAS5B,EAAiB,CACzDiB,UAAW,CACTH,MAAOI,OAAOC,aAAaC,QAAQ,mBAC/BF,OAAOC,aAAaC,QAAQ,mBAC5BF,OAAOG,eAAeD,QAAQ,oBAEpCM,QAAS,SAAAtB,GACPD,GAAkBC,MAPdyB,EApBmB,EAoBnBA,QAASN,EApBU,EAoBVA,KAAMO,EApBI,EAoBJA,MAWjBC,EAAaC,uBAAY,WAC7B1B,QAAQC,IAAI,cACZW,OAAOC,aAAac,WAAW,mBAC/Bf,OAAOG,eAAeY,WAAW,mBACjClB,EAAS,MACTY,MAEC,CAACA,IAEEH,EAAUQ,uBAAY,SAACE,EAAMC,GACjC,IAAIC,EAAc,CAAEX,cAAeS,GAE/BC,IACF7B,QAAQC,IAAI,uBACZW,OAAOC,aAAakB,QAAQ,kBAAmBH,EAAKpB,QAEtDI,OAAOG,eAAegB,QAAQ,kBAAmBH,EAAKpB,OAEtDH,EAAO2B,WAAW,CAChBC,MAAOvC,EACPuB,KAAMa,EACNnB,UAAW,CAAEH,MAAOoB,EAAKpB,WAG1B,CAACH,IAEJ6B,qBAAU,WACJjB,IACFC,EAAQD,EAAKE,eACbV,EAASQ,EAAKE,cAAcX,UAE7B,CAACS,EAAMC,IAEV,IAAIiB,EAAkB,KAWtB,OATMZ,GAAYC,IAAUhB,IAE1B2B,EAAkB9B,EAAO+B,UAAU,CACjCH,MAAOvC,EACPiB,UAAW,CAAEH,YAKV,CACLoB,KAAQL,GAAYC,IAAUhB,EAAwC,KAAhC2B,EAAgBhB,cACtDkB,YAAad,EACbe,UAAWd,EACXN,UACAO,eC5EWc,GAvFG,WAAO,IAAD,EACUhC,mBAAS,IADnB,mBACfiC,EADe,KACLC,EADK,OAEUlC,mBAAS,IAFnB,mBAEfmC,EAFe,KAELC,EAFK,OAGUpC,oBAAS,GAHnB,mBAGfsB,EAHe,KAGLe,EAHK,KAKd1B,EAAYd,KAAZc,QAEF2B,EAAUC,cAPM,EASOC,YAAYpD,EAAO,CAC9CyB,QAAS,SAAAtB,GACFA,EAAIC,eAAkBD,EAAIC,cAAc,GAG3CC,QAAQC,IAAIH,EAAIC,cAAc,GAAGG,SAFjCF,QAAQC,IAAIH,EAAII,SAIlByC,EAAY,OAhBM,mBASfK,EATe,KASRC,EATQ,KAqCtB,OAXAf,qBAAU,WACJe,EAAYhC,OACdwB,EAAY,IACZE,EAAY,IAEZzB,EAAQ+B,EAAYhC,KAAK+B,MAAOnB,GAEhCgB,EAAQK,KAAK,QAEd,CAACD,EAAYhC,KAAMC,EAAS2B,EAAShB,IAGtC,6BACE,qDACA,0BAAMsB,SApBO,SAAAC,GACfA,EAAMC,iBAENL,EAAM,CAAErC,UAAW,CAAE6B,WAAUE,gBAkB3B,6BACE,kBAACY,EAAA,EAAD,CACEC,MAAM,wBACNC,SAAU,SAAAC,GAAMhB,EAAYgB,EAAEC,OAAOC,QACrCC,KAAK,cAGT,6BACE,kBAACN,EAAA,EAAD,CACEC,MAAM,WACNM,KAAK,WACLL,SAAU,SAAAC,GAAMd,EAAYc,EAAEC,OAAOC,QACrCC,KAAK,cAGT,6BACE,kBAACE,EAAA,EAAD,CACEC,QACE,kBAACC,EAAA,EAAD,CACEC,QAASpC,EACT2B,SAAU,kBAAMZ,GAAaf,IAC7B+B,KAAK,aACLM,MAAM,YAGVX,MAAM,kBAGV,6BACE,kBAACY,EAAA,EAAD,CAAQC,QAAQ,YAAYF,MAAM,UAAUL,KAAK,UAAjD,cAKJ,oCAGA,6BACE,kBAACM,EAAA,EAAD,CAAQC,QAAQ,YAAYF,MAAM,UAAUG,QAAS,kBAAMxB,EAAQK,KAAK,eAAxE,iC,8BC7COoB,GArCF,WAAO,IAAD,EACYlE,KADZ,EACTwB,KADS,EACHH,WAEd,OACE,kBAAC8C,GAAA,EAAD,CAAQC,SAAS,UACf,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAYC,KAAK,QAAQT,MAAM,UAAUU,aAAW,SAEpD,kBAACT,EAAA,EAAD,CAAQD,MAAM,UAAUW,UAAWC,IAAMC,GAAG,SAA5C,SAGA,kBAACZ,EAAA,EAAD,CAAQD,MAAM,UAAUW,UAAWC,IAAMC,GAAG,SAA5C,aC0FOC,GApGM,WAAO,IAAD,EACOzE,mBAAS,IADhB,mBAClBiC,EADkB,KACRC,EADQ,OAEOlC,mBAAS,IAFhB,mBAElBmC,EAFkB,KAERC,EAFQ,OAGepC,mBAAS,IAHxB,mBAGlB0E,EAHkB,KAGJC,EAHI,OAIH3E,mBAAS,IAJN,mBAIlB4E,EAJkB,KAIbC,EAJa,KAKnBvC,EAAUC,cALS,EAOMC,YAAYnD,EAAU,CACnDwB,QAAS,SAAAtB,GACPE,QAAQC,IAAIH,EAAIC,cAAc,GAAGG,SACjCU,OAAOyE,MAAMvF,EAAIC,cAAc,GAAGG,YAVb,mBAOlBoF,EAPkB,KAOTC,EAPS,KAgCzB,OAXArD,qBAAU,WACJqD,EAAYtE,OACdwB,EAAY,IACZE,EAAY,IACZyC,EAAO,IAEPxE,OAAOyE,MAAM,0CACbxC,EAAQK,KAAK,QAEd,CAACqC,EAAYtE,KAAM4B,IAGpB,6BACE,0DACA,0BAAMM,SArBO,SAAAC,GACfA,EAAMC,iBAGNiC,EAAQ,CAAE3E,UAAW,CAAEiB,KADV,CAAEY,WAAUE,WAAUyC,YAmB/B,6BACE,kBAAC7B,EAAA,EAAD,CACEC,MAAM,wBACNC,SAAU,SAAAC,GAAMhB,EAAYgB,EAAEC,OAAOC,QACrCnC,MAA2B,IAApBgB,EAASgD,QAAgBhD,EAASgD,OAAS,EAClDC,WACsB,IAApBjD,EAASgD,QAAgBhD,EAASgD,OAAS,EACvC,cACA,uDAENE,UAAU,KAGd,6BACE,kBAACpC,EAAA,EAAD,CACEC,MAAM,WACNC,SAAU,SAAAC,GAAM2B,EAAO3B,EAAEC,OAAOC,QAChC8B,WAAW,wCACXC,UAAU,KAGd,6BACE,kBAACpC,EAAA,EAAD,CACEC,MAAM,WACNM,KAAK,WACLL,SAAU,SAAAC,GAAMd,EAAYc,EAAEC,OAAOC,QACrCnC,MAAOkB,EAAS8C,OAAS,GAAkB,KAAb9C,EAC9B+C,WACE/C,EAAS8C,OAAS,GAAkB,KAAb9C,EACnB,cACA,KAENgD,UAAU,IAEZ,yBACEC,MAAO,CACLC,WAAY,GACZC,cAAe,KAGjB,iHANF,4HAUF,6BACE,kBAACvC,EAAA,EAAD,CACEC,MAAM,qBACNM,KAAK,WACLL,SAAU,SAAAC,GAAMyB,EAAgBzB,EAAEC,OAAOC,QACzCnC,MAAOyD,IAAiBvC,EACxB+C,WAAYR,IAAiBvC,EAAW,sCAAqC,KAC7EgD,UAAU,KAGd,6BACE,kBAACvB,EAAA,EAAD,CAAQC,QAAQ,YAAYF,MAAM,UAAUL,KAAK,UAAjD,6B,UC3CKiC,GAhDE,WAAO,IAAD,EACGvF,mBAAS,MADZ,mBACdwF,EADc,KACRC,EADQ,KAEbpE,EAASxB,KAATwB,KAFa,EAGcmB,YAAYtD,EAAa,CAC1D2B,QAAS,SAAAtB,GACFA,EAAIC,eAAkBD,EAAIC,cAAc,GAG3CC,QAAQC,IAAIH,EAAIC,cAAc,GAAGG,SAFjCF,QAAQC,IAAIH,EAAII,YAND,mBAGd+F,EAHc,KAGFC,EAHE,KA4BrB,OAPAhE,qBAAU,WACR,GAAIgE,EAAajF,KAAM,CAAC,IACdkF,EAAOD,EAAajF,KAAKgF,WAAzBE,GACRH,EAAQ,GAAD,OAAIpF,OAAOwF,SAAX,YAAuBD,OAE/B,CAACD,EAAajF,OAGf,6BACE,kBAACkD,EAAA,EAAD,CAAQC,QAAQ,YAAYC,QAjBhB,WACTzC,EAGHqE,IAFAjG,QAAQC,IAAI,iDAeZ,sBAGC8F,EAEC,qGAC4D,KAC1D,kBAACjB,GAAA,EAAD,CAAMuB,KAAMN,GACTA,IAIL,O,2RC9BFO,GAAa,CACjBC,MAAO,GACPC,OAAQ,GAERC,cAAe,UAEJC,GAAY,SAAC7C,EAAM8C,GAC9B,MAAa,SAAT9C,GAA4B,UAAT8C,EACdC,KACW,UAAT/C,GAA6B,UAAT8C,EACtBE,KACW,WAAThD,GAA8B,UAAT8C,EACvBG,KACW,SAATjD,GAA4B,UAAT8C,EACrBI,KACW,WAATlD,GAA8B,UAAT8C,EACvBK,KACW,SAATnD,GAA4B,UAAT8C,EACrBM,KACW,SAATpD,GAA4B,UAAT8C,EACrBO,KACW,UAATrD,GAA6B,UAAT8C,EACtBQ,KACW,WAATtD,GAA8B,UAAT8C,EACvBS,KACW,SAATvD,GAA4B,UAAT8C,EACrBU,KACW,WAATxD,GAA8B,UAAT8C,EACvBW,KACW,SAATzD,GAA4B,UAAT8C,EACrBY,UADF,GAWHC,GAAQ,SAAC,GAA+B,IAA7B7B,EAA4B,EAA5BA,MAAOQ,EAAqB,EAArBA,GAAIQ,EAAiB,EAAjBA,KAAM9C,EAAW,EAAXA,KAAW,EACPtD,mBAAS,GAAtCkH,EADoC,oBAe3C,OACE,yBACE9B,MAAK,2BAAOA,GAAP,IAAc8B,YACnB9I,UAAU,QACV+I,UAAU,QAGV7D,KAAMsC,EACNQ,KAAMA,EACNR,GAAIA,EACJwB,IAAKjB,GAAU7C,EAAM8C,GACrBiB,IAAI,YAWJC,GAAO,SAAC,GAAkB,IAAhBlB,EAAe,EAAfA,KAAMR,EAAS,EAATA,GACd2B,EAAS,eAAQxB,IAEvB,OACE,kBAAC,GAAD,CAAOX,MAAOmC,EAAW3B,GAAIA,EAAIQ,KAAMA,EAAM9C,KAAK,QAAlD,MAMEkE,GAAQ,SAAC,GAAkB,IAAhBpB,EAAe,EAAfA,KAAMR,EAAS,EAATA,GACf6B,EAAU,eAAQ1B,IAExB,OACE,kBAAC,GAAD,CAAOX,MAAOqC,EAAY7B,GAAIA,EAAIQ,KAAMA,EAAM9C,KAAK,SAAnD,MAMEoE,GAAO,SAAC,GAAkB,IAAhBtB,EAAe,EAAfA,KAAMR,EAAS,EAATA,GACd+B,EAAS,eAAQ5B,IAEvB,OACE,kBAAC,GAAD,CAAOX,MAAOuC,EAAW/B,GAAIA,EAAIQ,KAAMA,EAAM9C,KAAK,QAAlD,MAMEsE,GAAS,SAAC,GAAkB,IAAhBxB,EAAe,EAAfA,KAAMR,EAAS,EAATA,GAChBiC,EAAW,eAAQ9B,IAEzB,OACE,kBAAC,GAAD,CAAOX,MAAOyC,EAAajC,GAAIA,EAAIQ,KAAMA,EAAM9C,KAAK,UAApD,MAMEwE,GAAS,SAAC,GAAkB,IAAhB1B,EAAe,EAAfA,KAAMR,EAAS,EAATA,GAChBmC,EAAW,eAAQhC,IAEzB,OACE,kBAAC,GAAD,CAAOX,MAAO2C,EAAanC,GAAIA,EAAIQ,KAAMA,EAAM9C,KAAK,UAApD,MAME0E,GAAO,SAAC,GAAkB,IAAhB5B,EAAe,EAAfA,KAAMR,EAAS,EAATA,GACdqC,EAAS,eAAQlC,IAEvB,OACE,kBAAC,GAAD,CAAOX,MAAO6C,EAAWrC,GAAIA,EAAIQ,KAAMA,EAAM9C,KAAK,QAAlD,MCHW4E,GAvIA,SAAC,GAAwE,IAAtEvE,EAAqE,EAArEA,MAAiBkC,GAAoD,EAA9DsC,SAA8D,EAApDtC,UAAUuC,EAA0C,EAA1CA,MAAsBxC,GAAoB,EAAnCyC,cAAmC,EAApBzC,IAAI0C,EAAgB,EAAhBA,UAC/DC,EAAgBC,mBAAQ,+BAAuB,UAAV7E,ECVZ,eACA,eDSD,OAA2E,CAACA,IADrB,EAE/C3D,mBAASuI,GAFsC,mBAE9EE,EAF8E,KAEjEC,EAFiE,KAGrF/G,qBAAU,WAEN+G,EADEJ,EACa,OAAD,OCZa,cDYb,KAECC,KAEhB,CAACD,EAAWC,IAGf,IAiEII,EAjEEC,EAAc,CAClB3C,OCxBsB,GDyBtBD,MCzBsB,GD0BtB6C,gBAAiBJ,EACjBK,UAAW,SACXC,WAAW,mBAAD,OAAqBN,EAArB,aAAqCF,EAArC,MA8DZ,GAAIH,EACF,OAAOA,EAAM9E,MAEb,IAAK,OACHqF,EAAgB,kBAAC,GAAD,CAAMvC,KAAMgC,EAAMhC,KAAMR,GAAI,EAAIC,EAASmD,IAAMnD,EAASoD,SACxE,MACF,IAAK,OACHN,EAAgB,kBAAC,GAAD,CAAMvC,KAAMgC,EAAMhC,KAAMR,GAAI,EAAIC,EAASmD,IAAMnD,EAASoD,SACxE,MACF,IAAK,SACHN,EAAgB,kBAAC,GAAD,CAAQvC,KAAMgC,EAAMhC,KAAMR,GAAI,EAAIC,EAASmD,IAAMnD,EAASoD,SAC1E,MACF,IAAK,SACHN,EAAgB,kBAAC,GAAD,CAAQvC,KAAMgC,EAAMhC,KAAMR,GAAI,EAAIC,EAASmD,IAAMnD,EAASoD,SAC1E,MACF,IAAK,QACHN,EAAgB,kBAAC,GAAD,CAAOvC,KAAMgC,EAAMhC,KAAMR,GAAI,EAAIC,EAASmD,IAAMnD,EAASoD,SACzE,MACF,IAAK,OACHN,EAAgB,kBAAC,GAAD,CAAMvC,KAAMgC,EAAMhC,KAAMR,GAAI,EAAIC,EAASmD,IAAMnD,EAASoD,SACxE,MACF,QACEN,EAAgB,KAMpB,OAAIA,EAEA,wBACE/C,GAAIA,EACJR,MAAOwD,EACPxK,UAAU,UAMTuK,GAKL,wBACE/C,GAAIA,EACJR,MAAOwD,EACPxK,UAAU,YEKD8K,GAxID,SAAC,GAAmE,IAAjEC,EAAgE,EAAhEA,eAAgBC,EAAgD,EAAhDA,MAAOjB,EAAyC,EAAzCA,SAAUkB,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,YAEvDjB,EAAgB,IAAIkB,IAC1BH,EAAMI,SAAQ,SAACR,EAAKS,GAClBT,EAAIQ,SAAQ,SAACpB,EAAOsB,GAClBrB,EAAcsB,IAAI,EAAIF,EAAIC,EAAGtB,SAIjC,IAAMwB,EAAUC,MAAMC,KAAKD,MAAM,IAAI,SAAC3G,EAAGuG,GAGvC,IAFA,IAAMT,EAAM,IAAIa,MAAM,GAEbH,EAAI,EAAGA,EAAI,EAAGA,IAEnBV,EAAIU,IADDD,EAAIC,GAAK,IAAM,EACT,CAAEtB,MAAO,KAAMzE,MAAO,SAEtB,CAAEyE,MAAO,KAAMzE,MAAO,SAInC,OAAOqF,KAGHe,EAAa,CACjB9D,OAAQ+D,IACRhE,MAAOgE,IACPC,YAAa,QACbC,YAAa,QACbC,YAAa,MACbpB,WAAY,QAKd,OACE,2BACE3K,UAAU,QACV0F,QAASuF,EACTe,YAAY,IACZhF,MAAO2E,GAEP,+BACsB,UAAnBZ,EAA6BC,EAAMiB,KAAI,SAACrB,EAAKS,GAC5C,OACE,wBAAIa,IAAKb,GACP,4BAAK,EAAIA,GAEPT,EAAIqB,KAAI,SAACjC,EAAOsB,GACd,IAAIpB,GAAY,EAWhB,OAVIgB,IACFA,EAAYiB,eAAef,SAAQ,SAAAgB,GAC7BA,EAAKC,YAAYzB,MAAQS,GAAKe,EAAKC,YAAYxB,SAAWS,IAC5DpB,GAAY,MAGZgB,EAAYzD,SAASmD,MAAQS,GAAKH,EAAYzD,SAASoD,SAAWS,IACpEpB,GAAY,IAGT,kBAAC,GAAD,CACLgC,IAAK,EAAIb,EAAIC,EACb9D,GAAI,EAAI6D,EAAIC,EACZ/F,MAAOiG,EAAQH,GAAGC,GAAG/F,MACrBwE,SAAUA,EACVtC,SAAU,CAAEmD,IAAKS,EAAGR,OAAQS,GAC5BtB,MAAOA,EACPC,cAAeA,EACfC,UAAWA,WAMlBc,EAAMiB,KAAI,SAACrB,EAAKS,GACnB,OACE,wBAAIa,IAAKb,GACP,4BAAKA,EAAI,GAEPT,EAAIqB,KAAI,SAACjC,EAAOsB,GACd,IAAIpB,GAAY,EAWhB,OAVIgB,IACFA,EAAYiB,eAAef,SAAQ,SAAAgB,GAC7BA,EAAKC,YAAYzB,MAAQ,EAAIS,GAAKe,EAAKC,YAAYxB,SAAW,EAAIS,IACpEpB,GAAY,MAGZgB,EAAYzD,SAASmD,MAAQ,EAAIS,GAAKH,EAAYzD,SAASoD,SAAW,EAAIS,IAC5EpB,GAAY,IAGT,kBAAC,GAAD,CACLgC,IAAK,GAAK,EAAIb,IAAM,EAAIC,GACxB9D,GAAI,GAAK,EAAI6D,IAAM,EAAIC,GACvB/F,MAAOiG,EAAQ,EAAIH,GAAG,EAAIC,GAAG/F,MAC7BwE,SAAUA,EACVtC,SAAU,CAAEmD,IAAM,EAAIS,EAAIR,OAAS,EAAIS,GACvCtB,MAAOgB,EAAM,EAAIK,GAAG,EAAIC,GACxBrB,cAAeA,EACfC,UAAWA,WAOH,UAAnBa,EAEC,4BACE,6BACA,iCACA,iCACA,iCACA,iCACA,iCACA,iCACA,iCACA,kCAGF,4BACE,6BACA,iCACA,iCACA,iCACA,iCACA,iCACA,iCACA,iCACA,qC,oBCjINuB,GAAYC,aAAW,CAC3BC,SAAU,CACR7B,WAAW,+BAAD,OFLmB,eEKnB,kBFJmB,eEInB,MACV8B,QAAS,GACT5E,OAAQ,MACRD,MAAO,OACP8C,UAAW,YA2DAgC,GAvDE,SAAC,GAAqF,IAAD,IAAnFC,KAAQC,EAA2E,EAA3EA,MAAOC,EAAoE,EAApEA,cAAeC,EAAqD,EAArDA,SAAUC,EAA2C,EAA3CA,kBAAmBC,EAAwB,EAAxBA,OAAUC,EAAc,EAAdA,QAAc,EACtExL,KAAtBwB,EAD4F,EAC5FA,KAAMS,EADsF,EACtFA,YACRwJ,EAAUZ,KAEhB,OAAI5I,EACK,aAIP,yBAAK1D,UAAU,YACZiD,EAAKuE,KAAOqF,GAAkBC,EAU7B,kBAACK,GAAA,EAAD,CAAOnN,UAAWkN,EAAQV,UAA1B,kCACkCI,GAASA,EAAMQ,mBAAqBnK,EAAKuE,GACrE,UACA,MAXN,kBAAC2F,GAAA,EAAD,CAAOnN,UAAWkN,EAAQV,UACxB,iDACqBI,GAASA,EAAMQ,mBAAqBnK,EAAKuE,GACxD,UACA,OASV,6BAEIvE,EAAKuE,KAAOuF,EAEV,8EACiD,IAC/C,kBAACvH,EAAA,EAAD,CAAQE,QAAS,kBAAMuH,EAAQ,WAA/B,cAGA,kBAACzH,EAAA,EAAD,CAAQE,QAAS,kBAAMuH,EAAQ,YAA/B,UAKF,MAGN,4BAEIH,EACIE,IAAW/J,EAAKuE,GACd,gCACA,+BACF,Q,UC1DR6F,GAAc,SAAC5F,GACnB,OAAwB,IAApBA,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAEH,IAApBnD,EAASoD,OACL,IAAN,OAAW,EAAKpD,EAASmD,KAElB,iBAUL0C,GAAO,SAAC,GAAyB,IAAvBlB,EAAsB,EAAtBA,KAAMmB,EAAgB,EAAhBA,UACdC,EAAiB,CACrBC,gBAAiB,QACjB3B,YAAa,OACbC,YAAa,MACb2B,gBAAiB,OAEjBjB,QAAS,GACT9B,WAAY,QAERgD,EAAY,CAChBF,gBAAiB,QACjB3B,YAAa,OACbC,YAAa,MACb2B,gBAAiB,MAEjBE,OAAQ,EACRjD,WAAY,QAERhD,EAAa4F,EAAY,CAC7B1F,OAAQ,GACRD,MAAO,SACLiG,EAEJ,MAAwB,iBAApBzB,EAAK0B,WAEL,kBAACX,GAAA,EAAD,CAAOnG,MAAOuG,EAAYC,EAAiBG,GACzC,yBACE3G,MAAOW,EACP3H,UAAU,QACV+I,UAAU,QACVC,IAAKjB,GAAUqE,EAAKpC,MAAM9E,KAAMkH,EAAKpC,MAAMhC,MAC3CiB,IAAKmD,EAAKpC,MAAM9E,OAEjBmI,GAAYjB,EAAKC,cAIA,iBAApBD,EAAK0B,WAEL,kBAACX,GAAA,EAAD,CAAOnG,MAAOuG,EAAYC,EAAiBG,GAA3C,YAKoB,kBAApBvB,EAAK0B,WAEL,kBAACX,GAAA,EAAD,CAAOnG,MAAOuG,EAAYC,EAAiBG,GACxCN,GAAYjB,EAAK2B,cAActG,UAChC,yBACET,MAAOW,EACP3H,UAAU,QACV+I,UAAU,QACVC,IAAKjB,GAAUqE,EAAK2B,cAAc7I,KAAMkH,EAAK2B,cAAc/F,MAC3DiB,IAAKmD,EAAK2B,cAAc7I,OAEzB,UACD,yBACE8B,MAAOW,EACP3H,UAAU,QACV+I,UAAU,QACVC,IAAKjB,GAAUqE,EAAK4B,WAAY5B,EAAK2B,cAAc/F,MACnDiB,IAAKmD,EAAK2B,cAAc7I,QAM9B,kBAACiI,GAAA,EAAD,eAMEc,GAAc,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YAKrB,OACE,yBAAKlO,UAAU,cAAcgH,MALN,CACvBmH,UAAW,SACXtG,OAAQ,MAILqG,EAAYjC,KAAI,SAACG,EAAMgC,GAKtB,OAHAhC,EAAO8B,EAAYA,EAAYrH,OAAS,EAAIuH,GAG9B,IAAVA,EACK,kBAAC,GAAD,CAAMhC,KAAMA,EAAMF,IAAKkC,IAEvB,UAwCFC,GAjCE,SAAC,GAAqB,IAAnBH,EAAkB,EAAlBA,YAAkB,EACNtM,oBAAS,GADH,mBAC7B0M,EAD6B,KACpBC,EADoB,KAE9BvH,EAAQ,CACZ2D,WAAW,+BAAD,OHzImB,eGyInB,kBHxImB,eGwInB,MACV8B,QAAS,QAKX,GAA2B,IAAvByB,EAAYrH,OACd,OACE,sDAMJ,IAAM2H,EAAWN,EAAYA,EAAYrH,OAAS,GAElD,OACE,kBAACsG,GAAA,EAAD,CAAOnG,MAAOA,GACZ,kBAACyH,GAAA,EAAD,CAAYhJ,QAAQ,MAApB,oBAGA,kBAAC,GAAD,CAAM2G,KAAMoC,EAAUjB,WAAW,IACjC,kBAAC/H,EAAA,EAAD,CAAQC,QAAQ,YAAYC,QAAS,kBAAM6I,GAAYD,IAAU/I,MAAM,WAAvE,8BAGC+I,EAAU,kBAAC,GAAD,CAAaJ,YAAaA,IAAkB,OCjKhDQ,GAAa,SAAC,GAA2D,IAAzDC,EAAwD,EAAxDA,WAAYC,EAA4C,EAA5CA,YAAaC,EAA+B,EAA/BA,aAAclC,EAAiB,EAAjBA,KAAM1J,EAAW,EAAXA,KACxE,OACE0L,EAAW3H,MAAM2D,aAAjB,8BJD6B,cIC7B,kBJF6B,eIE7B,OACAgE,EAAW3H,MAAM2D,aAAjB,8BJF6B,cIE7B,kBJJ6B,eII7B,OAGAkE,GACAA,EAAarH,KAAOoH,EAAYpH,IAGhCmF,EAAKG,UACLH,EAAKI,mBAGL9J,EAAKuE,KAAOmF,EAAKE,eAKRiC,GAAe,SAAC,GAAkC,IAAhCD,EAA+B,EAA/BA,aAAclC,EAAiB,EAAjBA,KAAM1J,EAAW,EAAXA,KAQjD,OACEA,EAAKuE,KAAOmF,EAAKE,eACjBgC,EAAa7G,QAAU2E,EAAKoC,cAAgB9L,EAAKuE,GAAK,QAAU,WAG/DmF,EAAKI,oBACLJ,EAAKG,UCZKkC,GApBK,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACzBlI,EAAQ,CACZ2D,WAAW,+BAAD,OLJmB,eKInB,kBLHmB,eKGnB,MACV8B,QAAS,QAGX,OACE,kBAACU,GAAA,EAAD,CAAOnG,MAAOA,GACZ,kBAACxB,EAAA,EAAD,CACEC,QAAQ,WACR0J,KAAK,QACLzJ,QAAS,kBAAMuJ,KACfC,SAAUA,GAJZ,iBCFA5C,GAAYC,aAAW,CAC3BI,KAAM,KA6JOyC,GAxJF,WAAO,IAAD,EbFI,WACrB,IAAM1N,EAASC,cACP6F,EAAO6H,cAAP7H,GAEF8H,EAAU,SAAAC,GACd,IAAIC,EAAkB9N,EAAO+B,UAAU,CAAEH,MAAO9C,EAAUwB,UAAW,CAAEyN,OAAQjI,KAC/EgI,EAAkB,CAAEE,QAASH,EAAYI,kBAIzCjO,EAAO2B,WAAW,CAChBC,MAAO9C,EACP8B,KAAMkN,EACNxN,UAAW,CAAEwF,SAQXoI,EAAgBjN,YAASnC,EAAU,CACvCwB,UAAW,CAAEyN,OAAQjI,GACrB/E,QAAS,SAAAtB,GACPD,GAAkBC,MAxBK,EA2BRiD,YAAYvD,GAAxBkJ,EA3BoB,sBA4BT3F,YAAYxD,GAAvBqM,EA5BoB,sBA6BR7I,YAAY3D,EAAW,CACxCuB,UAAW,CAAEyN,OAAQjI,GACrB/E,QAAS,SAAAtB,GACPD,GAAkBC,MAHf8N,EA7BoB,sBAmCR7K,YAAYzD,EAAW,CACxCqB,UAAW,CAAEyN,OAAQjI,GACrB/E,QAAS,SAAAtB,GACPD,GAAkBC,IAEpBkB,YAAa,SAAAC,GACXgN,EAAQhN,MANLuN,EAnCoB,oBA6C3BC,YAAgBpP,EAAoB,CAClCqP,mBAAoB,YAA2B,IAAxBC,EAAuB,EAAvBA,iBACrBV,EAAQU,EAAiB1N,OAI3BN,UAAW,CAAEyN,OAAQjI,KAGvBjE,qBAAU,WACRsM,MACC,CAACA,IAMJ,MAAO,CACLlD,KAAMiD,EAAchN,SAAWgN,EAAc/M,MAAQ,KAAO+M,EAActN,KAAKoN,QAC/EO,YAAaL,EAAchN,QAC3BsN,UAAWN,EAAc/M,MACzBoK,QARuB,SAAA/H,GACvB+H,EAAQ,CAAEjL,UAAW,CAAEyN,OAAQjI,EAAI2I,UAAWjL,MAQ9C6E,SAAU,gBAAGC,EAAH,EAAGA,MAAOoG,EAAV,EAAUA,YAAa/D,EAAvB,EAAuBA,YAAvB,OAAyCtC,EAAS,CAC1D/H,UAAW,CAAEoK,KAAM,CAAEpC,QAAOoG,cAAa/D,cAAaoD,OAAQjI,OAEhEyH,YanEmEoB,GAA9D1D,EADU,EACVA,KAAMsD,EADI,EACJA,YAAaC,EADT,EACSA,UAAWnG,EADpB,EACoBA,SAAUkD,EAD9B,EAC8BA,QAASgC,EADvC,EACuCA,SADvC,EAEaxN,KAAtBwB,EAFS,EAETA,KAAMS,EAFG,EAEHA,YAFG,EAGqB9B,mBAAS,MAH9B,mBAGVgN,EAHU,KAGG0B,EAHH,KAIXpD,EAAUZ,KAEhB,GAAI2D,GAAevM,EACjB,MAAO,aAET,IAAKiJ,EACH,OAAOuD,EAAUK,WAVF,IAafvF,EAOE2B,EAPF3B,MACA+D,EAMEpC,EANFoC,YACAb,EAKEvB,EALFuB,YACArB,EAIEF,EAJFE,cACAE,EAGEJ,EAHFI,kBACAH,EAEED,EAFFC,MACA4D,EACE7D,EADF6D,YAIIvF,EAAW,yCAAG,WAAMxG,GAAN,sCAAAgM,EAAA,yDAClBhM,EAAMC,iBAKwB,WAH1BgM,EAAcjM,EAAMM,QAGR/E,UANE,oBAOV6O,EAAe7D,EAAM2F,KAAKC,MAAMC,OAAOH,EAAYlJ,IAAM,IAAIqJ,OAAOH,EAAYlJ,IAAM,IAExFoH,EATY,qBAUVF,GAAW,CACbC,WAAY+B,EAAYI,WACxBlC,cACAC,eACA5L,OACA0J,SAfY,uBAiBZ2D,EAAe,MAjBH,iCAqBRtG,EAAQ,CAAE9E,KAAM0J,EAAY1J,KAAM8C,KAAM4G,EAAY5G,MACpDoI,EAAc,CAAExF,IAAKgE,EAAYnH,SAASmD,IAAKC,OAAQ+D,EAAYnH,SAASoD,QAC5EwB,EAAc,CAAEzB,IAAKiE,EAAapH,SAASmD,IAAKC,OAAQgE,EAAapH,SAASoD,QAvBtE,oBA0BMd,EAAS,CAAEC,QAAOoG,cAAa/D,gBA1BrC,SA0BN0E,EA1BM,QA2BHzO,KAAKyH,SAASyE,SAASwC,SAC9B3P,QAAQC,IAAIyP,EAAIzO,KAAKyH,SAASyE,SAASjN,SA5B7B,mDA+BZL,GAAkB,EAAD,IA/BL,QAiCdoP,EAAe,MAjCD,wBAkCLxB,GAAa,CAAED,eAAclC,OAAM1J,UAE5CqN,EAAezB,GApCD,mCAwCmB,WAA1B6B,EAAY1Q,UAxCL,qBAyCViR,EAAmBP,EAAYQ,cAGnCrC,EAAe7D,EAAM2F,KAAKC,MAAMC,OAAOI,EAAiBzJ,IAAM,IAAIqJ,OAAOI,EAAiBzJ,IAAM,KAG9FoH,EA/CY,qBAiDVF,GAAW,CACbC,WAAY+B,EACZ9B,cACAC,eACA5L,OACA0J,SAtDY,wBAwDZ2D,EAAe,MAxDH,kCA4DRtG,EAAQ,CAAE9E,KAAM0J,EAAY1J,KAAM8C,KAAM4G,EAAY5G,MACpDoI,EAAc,CAAExF,IAAKgE,EAAYnH,SAASmD,IAAKC,OAAQ+D,EAAYnH,SAASoD,QAC5EwB,EAAc,CAAEzB,IAAK+F,KAAKC,MAAMC,OAAOH,EAAYlJ,IAAM,GAAIqD,OAAQgG,OAAOH,EAAYlJ,IAAM,GA9DtF,oBAiEMuC,EAAS,CAAEC,QAAOoG,cAAa/D,gBAjErC,SAiEN0E,EAjEM,QAkEHzO,KAAKyH,SAASyE,SAASwC,SAC9B3P,QAAQC,IAAIyP,EAAIzO,KAAKyH,SAASyE,SAASjN,SAnE7B,mDAsEZL,GAAkB,EAAD,IAtEL,QAwEdoP,EAAe,MAxED,wBAyELzB,GAAgBC,GAAa,CAAED,eAAclC,OAAM1J,UAC5DqN,EAAezB,GA1ED,gCA8EhByB,EAAe,MA9EC,mEAAH,sDAqFjB,OACE,kBAACa,EAAA,EAAD,CACEC,WAAS,EACTC,UAAU,MAEVC,QAAQ,SACRtR,UAAWkN,EAAQP,KACnB4E,QAAS,EACTC,KAAK,QAEL,kBAACL,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,EAAGC,GAAI,GACpB,kBAAC,GAAD,CACE1C,SAAUA,EACVC,SACGjM,EAAKuE,KAAOqF,GAAuC,OAAtBE,GACnB,OAAVH,GAAmC,OAAhBmC,GAAwC,OAAhByB,KAIlD,kBAACW,EAAA,EAAD,CACEC,WAAS,EACTK,MAAI,EACJC,GAAI,GACJC,GAAI,EACJN,UAAU,SACVO,WAAW,UAGX,kBAAC,GAAD,CACE5G,MAAOA,EACPD,eAAgB9H,EAAKuE,KAAOuH,EAAc,QAAU,QACpDhF,SAAUA,EACVkB,YAAaA,EACbC,YAAa0D,IAEf,kBAAC,GAAD,CAAUjC,KAAMA,EAAMM,QAASA,KAEjC,kBAACkE,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,EAAGC,GAAI,GACpB,kBAAC,GAAD,CAAUzD,YAAaA,O,UCtJzB5B,GAAYC,aAAW,CAC3BsF,KAAM,CACJhK,OAAQ,UA2CGiK,GAvCH,WAAO,IACT7O,EAASxB,KAATwB,KACFiK,EAAUZ,KAEhB,OACE,kBAACyF,GAAA,EAAD,CAAW7E,QAASA,GAClB,kBAACiE,EAAA,EAAD,CACEC,WAAS,EACTC,UAAU,SACVO,WAAW,SACXN,QAAQ,gBACRpE,QAASA,EACTsE,KAAK,UAEL,kBAAC,GAAD,MACCvO,EAEC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO+O,KAAK,aACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,SACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,UACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,aACV,kBAAC,GAAD,QAGF,cAEJ,kBAAC,EAAD,S,4EhBzCFC,GAAWC,cAAW,SAACC,EAAD,GAAqB,IAAfC,EAAc,EAAdA,QAC1BvQ,EAAQO,eAAeD,QAAQ,mBACrC,MAAO,CACLiQ,QAAQ,2BACHA,GADE,IAELC,cAAexQ,EAAK,iBAAaA,GAAU,WAK7CyQ,GAAMrQ,OAAOwF,SAEfxH,EADmB,WAAjBqS,GAAIC,SACE,OAEA,MAEVtS,GAAS,KAAOqS,GAAIE,KACpBnR,QAAQC,IAAR,UAAerB,EAAf,aAEA,IAAMwS,GAAW,IAAIC,KAAS,CAC5BC,IAAK,aAGDC,GAAS,IAAIC,KAAc,CAC/BF,IAAI,GAAD,OAAK1S,EAAL,YACH6S,QAAS,CACPC,WAAW,KAITC,GAAYC,cAChB,YAAc,IAAZ3P,EAAW,EAAXA,MACM4P,EAAaC,aAAkB7P,GACrC,MACsB,wBAApB4P,EAAWE,MACc,iBAAzBF,EAAWG,YAGfT,GACAX,GAASqB,OAAOb,KAGZ/Q,GAAS,IAAI6R,KAAa,CAC9BC,MAAO,IAAIC,KACXrM,KAAM4L,GACNU,mBAAmB,IAKrBC,IAASC,OACP,kBAACC,GAAA,EAAD,CAAgBnS,OAAQA,IACtB,kBAAC,IAAD,KACE,kBAAC,GAAD,QAGJoS,SAASC,eAAe,W","file":"static/js/main.91222b59.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/blackking.66e1bcad.svg\";","module.exports = __webpack_public_path__ + \"static/media/blackqueen.7b3e33e4.svg\";","module.exports = __webpack_public_path__ + \"static/media/blackrook.96872a66.svg\";","module.exports = __webpack_public_path__ + \"static/media/blackbishop.1f3b8d1a.svg\";","module.exports = __webpack_public_path__ + \"static/media/blackknight.d39f1d02.svg\";","module.exports = __webpack_public_path__ + \"static/media/blackpawn.1c52d8c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/whiteking.250510ff.svg\";","module.exports = __webpack_public_path__ + \"static/media/whitequeen.4320a2dd.svg\";","module.exports = __webpack_public_path__ + \"static/media/whiterook.095b1a06.svg\";","module.exports = __webpack_public_path__ + \"static/media/whitebishop.09004fd2.svg\";","module.exports = __webpack_public_path__ + \"static/media/whiteknight.e6294efe.svg\";","module.exports = __webpack_public_path__ + \"static/media/whitepawn.d69014fb.svg\";","import React from \"react\"\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <div className=\"footer\">\r\n      Student project for Full Stack open 2020. By using this site you accept the use of essential cookies.\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer","import { gql } from \"@apollo/client\"\r\n\r\n\r\n// fragments\r\nconst LOCATION = gql`\r\n  fragment location on Location {\r\n    row\r\n    column\r\n  }\r\n`\r\n\r\nconst IDLE_PIECE = gql`\r\n  fragment idlePiece on Piece {\r\n    type\r\n    side\r\n    location {\r\n      ...location\r\n    }\r\n  }\r\n  ${LOCATION}\r\n`\r\n\r\nconst MOVED_PIECE = gql`\r\n  fragment movedPiece on Piece {\r\n    type\r\n    side\r\n    lastLocation {\r\n      ...location\r\n    }\r\n  }\r\n  ${LOCATION}\r\n`\r\n\r\nconst MOVE_HISTORY_ENTRY = gql`\r\n fragment moveHistoryEntry on MoveHistoryEntry {\r\n   leadToCheck\r\n   wonTheGame\r\n }\r\n`\r\n\r\nconst GAME_STATE_DETAILS = gql`\r\n  fragment gameStateDetails on Game {\r\n    board {\r\n      ...idlePiece\r\n      id\r\n      availableMoves {\r\n        newLocation {\r\n          ...location\r\n        }\r\n      }\r\n    }\r\n    id\r\n    currentPlayer\r\n    whitePlayer\r\n    blackPlayer\r\n    winner\r\n    gameOver\r\n    promotionPlayerID\r\n    check {\r\n      threatenedPlayer\r\n      movesAvailable {\r\n        piece {\r\n          type\r\n          side\r\n        }\r\n        newLocation {\r\n          ...location\r\n        }\r\n      }\r\n    }\r\n    moveHistory {\r\n      ... on CastlingMove {\r\n        piece {\r\n          ...movedPiece\r\n        }\r\n        castledPiece {\r\n          ...movedPiece\r\n        }\r\n      }\r\n      ... on PromotionMove {\r\n        promotedPiece {\r\n          ...idlePiece\r\n        }\r\n        promotedTo\r\n      }\r\n      ... on OrdinaryMove {\r\n        piece {\r\n          ...movedPiece\r\n        }\r\n        pieceEaten {\r\n          ...idlePiece\r\n        }\r\n        newLocation {\r\n          ...location\r\n        }\r\n      }\r\n      ...moveHistoryEntry\r\n    }\r\n  }\r\n  ${LOCATION}\r\n  ${IDLE_PIECE}\r\n  ${MOVED_PIECE}\r\n  ${MOVE_HISTORY_ENTRY}\r\n`\r\n/* ${MOVED_PIECE}\r\n  ${MOVE_HISTORY_ENTRY} */\r\n\r\n/* moveHistory {\r\n  ... on OrdinaryMove {\r\n    piece {\r\n      ...movedPiece\r\n    }\r\n    pieceEaten {\r\n      ...idlePiece\r\n    }\r\n    newLocation {\r\n      ...location\r\n    }\r\n  }\r\n  ... on CastlingMove {\r\n    piece {\r\n      ...movedPiece\r\n    }\r\n    castledPiece {\r\n      ...movedPiece\r\n    }\r\n  }\r\n  ... on PromotionMove {\r\n    promotedPiece {\r\n      ...idlePiece\r\n    }\r\n    promotedTo\r\n  }\r\n  ...moveHistoryEntry\r\n} */\r\n\r\n/* const USER_DETAILS = gql`\r\n  fragment userDetails on User {\r\n    username\r\n    tag\r\n    friends {\r\n      tag\r\n    }\r\n    guest\r\n    id\r\n  }\r\n` */\r\n\r\n\r\n// mutations and queries\r\n\r\n// game related\r\nexport const GET_GAME = gql`\r\n  query getGame($gameId: String!) {\r\n    getGame(\r\n      gameId: $gameId\r\n    ) {\r\n      ...gameStateDetails\r\n    }\r\n  }\r\n  ${GAME_STATE_DETAILS}\r\n`\r\n\r\nexport const SKIP_TURN = gql`\r\n  mutation skipTurn($gameId: String!) {\r\n    skipTurn(\r\n      gameId: $gameId\r\n    ) {\r\n      ...gameStateDetails\r\n    }\r\n  }\r\n  ${GAME_STATE_DETAILS}\r\n`\r\n\r\nexport const GAME_STATE_UPDATED = gql`\r\n  subscription gameStateUpdated($gameId: String!) {\r\n    gameStateUpdated(\r\n      gameId: $gameId\r\n    ) {\r\n      ...gameStateDetails\r\n    }\r\n  }\r\n  ${GAME_STATE_DETAILS}\r\n`\r\n\r\nexport const JOIN_GAME = gql`\r\n  mutation joinGame($gameId: String!) {\r\n    joinGame(\r\n      gameId: $gameId\r\n    ) {\r\n      ...gameStateDetails\r\n    }\r\n  }\r\n  ${GAME_STATE_DETAILS}\r\n`\r\n\r\nexport const PROMOTE = gql`\r\n  mutation promote($gameId: String!, $pieceType: String!) {\r\n    promote(\r\n      gameId: $gameId,\r\n      pieceType: $pieceType\r\n    ) {\r\n      ...gameStateDetails\r\n    }\r\n  }\r\n  ${GAME_STATE_DETAILS}\r\n`\r\n\r\nexport const MAKE_MOVE = gql`\r\n  mutation makeMove($move: MoveInput!) {\r\n    makeMove(\r\n      move: $move\r\n    ) {\r\n      lastMove {\r\n        success\r\n        message\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const CREATE_GAME = gql`\r\n  mutation createGame {\r\n    createGame {\r\n      board {\r\n        type\r\n        side\r\n      }\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\n// user related\r\nexport const GET_LOGGED_USER = gql`\r\n  query getLoggedUser($token: String) {\r\n    getLoggedUser(\r\n      token: $token\r\n    ) {\r\n      username\r\n      tag\r\n      friends {\r\n        tag\r\n      }\r\n      id\r\n      token\r\n      guest\r\n    }\r\n  }\r\n`\r\n\r\nexport const LOGIN = gql`\r\n  mutation login($username: String!, $password: String!) {\r\n    login(\r\n      username: $username,\r\n      password: $password\r\n    ) {\r\n      username\r\n      tag\r\n      friends {\r\n        tag\r\n      }\r\n      token\r\n      guest\r\n      id\r\n    }\r\n  }\r\n`\r\n\r\nexport const ADD_USER = gql`\r\n  mutation addUser($user: NewUserInput!) {\r\n    addUser(\r\n      user: $user\r\n    ) {\r\n      username\r\n      tag\r\n      id\r\n      friends {\r\n        tag\r\n      }\r\n    }\r\n  }\r\n`","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { BrowserRouter as Router } from \"react-router-dom\"\nimport App from \"./App\"\n\nimport { ApolloProvider, ApolloClient, InMemoryCache, HttpLink, split } from \"@apollo/client\"\nimport { setContext } from \"@apollo/link-context\"\nimport { getMainDefinition } from \"@apollo/client/utilities\"\nimport { WebSocketLink } from \"@apollo/link-ws\"\n\nconst authLink = setContext((_, { headers }) => {\n  const token = sessionStorage.getItem(\"loggedChessUser\")\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `bearer ${token}` : null\n    }\n  }\n})\n\nlet loc = window.location, wsUri\nif (loc.protocol === \"https:\") {\n  wsUri = \"wss:\"\n} else {\n  wsUri = \"ws:\"\n}\nwsUri += \"//\" + loc.host\nconsole.log(`${wsUri}/graphql`)\n\nconst httpLink = new HttpLink({\n  uri: \"/graphql\"\n})\n\nconst wsLink = new WebSocketLink({\n  uri: `${wsUri}/graphql`,\n  options: {\n    reconnect: true\n  }\n})\n\nconst splitLink = split(\n  ({query}) => {\n    const definition = getMainDefinition(query)\n    return (\n      definition.kind === \"OperationDefinition\" &&\n      definition.operation === \"subscription\"\n    )\n  },\n  wsLink,\n  authLink.concat(httpLink),\n)\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: splitLink,\n  connectToDevTools: true,\n})\n\n\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <Router>\n      <App />\n    </Router>\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n)\n","export const handleApolloError = err => {\r\n  if (!err.graphQLErrors || !err.graphQLErrors[0]) {\r\n    console.log(err.message)\r\n    if (err.stack) {\r\n      console.log(err.stack)\r\n    }\r\n  } else {\r\n    console.log(err.graphQLErrors[0].message)\r\n    if (err.graphQLErrors[0].stack) {\r\n      console.log(err.graphQLErrors[0].stack)\r\n    }\r\n  }\r\n}","import { useEffect, useCallback, useState } from \"react\"\r\nimport { useQuery, useMutation, useSubscription, useApolloClient, useLazyQuery } from \"@apollo/client\"\r\nimport {\r\n  GET_GAME,\r\n  MAKE_MOVE,\r\n  GAME_STATE_UPDATED,\r\n  JOIN_GAME, PROMOTE,\r\n  GET_LOGGED_USER,\r\n  SKIP_TURN,\r\n} from \"../queries\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { handleApolloError } from \"./errorHandlers\"\r\n\r\n// hook that gets the game state\r\nexport const useGame = () => {\r\n  const client = useApolloClient()\r\n  const { id } = useParams()\r\n\r\n  const setGame = newGameData => {\r\n    let gameDataInStore = client.readQuery({ query: GET_GAME, variables: { gameId: id } })\r\n    gameDataInStore = { getGame: newGameData.gameStateUpdated }\r\n  \r\n    /* console.log(\"newGameData:\", newGameData)\r\n    console.log(\"gameState tobe:\", gameDataInStore) */\r\n    client.writeQuery({\r\n      query: GET_GAME,\r\n      data: gameDataInStore,\r\n      variables: { id }\r\n    })\r\n    /* console.log(\"Game state updated with:\", client.readQuery({\r\n      query: GET_GAME,\r\n      variables: { id }\r\n    })) */\r\n  }\r\n\r\n  const initialResult = useQuery(GET_GAME, {\r\n    variables: { gameId: id },\r\n    onError: err => {\r\n      handleApolloError(err)\r\n    },\r\n  })\r\n  const [makeMove] = useMutation(MAKE_MOVE)\r\n  const [promote] = useMutation(PROMOTE)\r\n  const [skipTurn] = useMutation(SKIP_TURN, {\r\n    variables: { gameId: id },\r\n    onError: err => {\r\n      handleApolloError(err)\r\n    }\r\n  })\r\n  const [joinGame] = useMutation(JOIN_GAME, {\r\n    variables: { gameId: id },\r\n    onError: err => {\r\n      handleApolloError(err)\r\n    },\r\n    onCompleted: data => {\r\n      setGame(data)\r\n    }\r\n  })\r\n\r\n  useSubscription(GAME_STATE_UPDATED, {\r\n    onSubscriptionData: ({ subscriptionData }) => {\r\n      setGame(subscriptionData.data)\r\n      /* console.log(\"subscriptionBoard\",subscriptionData.data.gameStateUpdated.board) */\r\n      /* console.log(subscriptionData.data.gameStateUpdated.moveHistory) */\r\n    },\r\n    variables: { gameId: id }\r\n  })\r\n\r\n  useEffect(() => {\r\n    joinGame()\r\n  }, [joinGame])\r\n\r\n  const sendPromotedType = type => {\r\n    promote({ variables: { gameId: id, pieceType: type } })\r\n  }\r\n\r\n  return {\r\n    game: initialResult.loading || initialResult.error ? null : initialResult.data.getGame,\r\n    gameLoading: initialResult.loading,\r\n    gameError: initialResult.error,\r\n    promote: sendPromotedType,\r\n    makeMove: ({ piece, oldLocation, newLocation }) => makeMove({\r\n      variables: { move: { piece, oldLocation, newLocation, gameId: id } }\r\n    }),\r\n    skipTurn,\r\n  }\r\n}\r\n\r\n\r\n\r\n// hook that gets the user\r\nexport const useUser = () => {\r\n  const client = useApolloClient()\r\n  const [token, setToken] = useState(null)\r\n\r\n  // lazy user query\r\n  const [getUser] = useLazyQuery(GET_LOGGED_USER, {\r\n    variables: {\r\n      token: window.localStorage.getItem(\"loggedChessUser\")\r\n        ? window.localStorage.getItem(\"loggedChessUser\")\r\n        : window.sessionStorage.getItem(\"loggedChessUser\")\r\n    },\r\n    onCompleted: data => {\r\n      setUser(data.getLoggedUser)\r\n    },\r\n    onError: err => {\r\n      handleApolloError(err)\r\n    },\r\n  })\r\n  \r\n  // user query\r\n  const { loading, data, error } = useQuery(GET_LOGGED_USER, {\r\n    variables: {\r\n      token: window.localStorage.getItem(\"loggedChessUser\")\r\n        ? window.localStorage.getItem(\"loggedChessUser\")\r\n        : window.sessionStorage.getItem(\"loggedChessUser\")\r\n    },\r\n    onError: err => {\r\n      handleApolloError(err)\r\n    },\r\n  })\r\n\r\n  const removeUser = useCallback(() => {\r\n    console.log(\"logged out\")\r\n    window.localStorage.removeItem(\"loggedChessUser\")\r\n    window.sessionStorage.removeItem(\"loggedChessUser\")\r\n    setToken(null)\r\n    getUser()\r\n    return\r\n  }, [getUser])\r\n\r\n  const setUser = useCallback((user, remember) => {\r\n    let newUserData = { getLoggedUser: user }\r\n\r\n    if (remember) {\r\n      console.log(\"localStorageen meni\")\r\n      window.localStorage.setItem(\"loggedChessUser\", user.token)\r\n    }\r\n    window.sessionStorage.setItem(\"loggedChessUser\", user.token)\r\n\r\n    client.writeQuery({\r\n      query: GET_LOGGED_USER,\r\n      data: newUserData,\r\n      variables: { token: user.token }\r\n    })\r\n\r\n  }, [client])\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      setUser(data.getLoggedUser)\r\n      setToken(data.getLoggedUser.token)\r\n    }\r\n  }, [data, setUser])\r\n\r\n  let userDataInStore = null\r\n\r\n  if ((!loading && !error) && token) {\r\n    /* console.log(token) */\r\n    userDataInStore = client.readQuery({\r\n      query: GET_LOGGED_USER,\r\n      variables: { token }\r\n    })\r\n  }\r\n\r\n\r\n  return {\r\n    user: (!loading && !error) && token ? userDataInStore.getLoggedUser : null,\r\n    userLoading: loading,\r\n    userError: error,\r\n    setUser,\r\n    removeUser,\r\n  }\r\n}","import React, { useState, useEffect } from \"react\"\r\nimport { TextField, Button, Checkbox, FormControlLabel, } from \"@material-ui/core\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { LOGIN } from \"../queries\"\r\nimport { useMutation } from \"@apollo/client\"\r\nimport { useUser } from \"../utils/stateHooks\"\r\n\r\n\r\nconst LoginForm = () => {\r\n  const [username, setUsername] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [remember, setRemember] = useState(true)\r\n\r\n  const { setUser } = useUser()\r\n\r\n  const history = useHistory()\r\n\r\n  const [login, loginResult] = useMutation(LOGIN, {\r\n    onError: err => {\r\n      if (!err.graphQLErrors || !err.graphQLErrors[0]) {\r\n        console.log(err.message)\r\n      } else {\r\n        console.log(err.graphQLErrors[0].message)\r\n      }\r\n      setPassword(\"\")\r\n    }\r\n  })\r\n\r\n  const onSubmit = event => {\r\n    event.preventDefault()\r\n\r\n    login({ variables: { username, password } })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (loginResult.data) {\r\n      setUsername(\"\")\r\n      setPassword(\"\")\r\n\r\n      setUser(loginResult.data.login, remember)\r\n\r\n      history.push(\"/\")\r\n    }\r\n  }, [loginResult.data, setUser, history, remember])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Kirjaudu sisään</h2>\r\n      <form onSubmit={onSubmit}>\r\n        <div>\r\n          <TextField\r\n            label=\"Käyttäjänimi\"\r\n            onChange={e => {setUsername(e.target.value)}}\r\n            name=\"username\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <TextField\r\n            label=\"Salasana\"\r\n            type=\"password\"\r\n            onChange={e => {setPassword(e.target.value)}}\r\n            name=\"password\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={remember}\r\n                onChange={() => setRemember(!remember)}\r\n                name=\"rememberMe\"\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Muista minut\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n            Kirjaudu\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <div>\r\n        tai\r\n      </div>\r\n      <div>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={() => history.push(\"/register\")}>\r\n          Luo uusi käyttäjä\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm","import React from \"react\"\r\nimport { AppBar, Toolbar, IconButton, Button, Typography } from \"@material-ui/core\"\r\nimport { Link, } from \"react-router-dom\"\r\nimport { useUser } from \"../utils/stateHooks\"\r\n\r\nconst Menu = () => {\r\n  const { user, removeUser } = useUser()\r\n\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar>\r\n        <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\r\n        </IconButton>\r\n        <Button color=\"inherit\" component={Link} to=\"/play\">\r\n          Pelaa\r\n        </Button>\r\n        <Button color=\"inherit\" component={Link} to=\"/info\">\r\n          Ohjeet\r\n        </Button>\r\n        {/* {!user || user.guest \r\n          ?\r\n          <Button color=\"inherit\" component={Link} to=\"/login\">\r\n            Kirjaudu\r\n          </Button>\r\n          :\r\n          <Typography variant=\"subtitle1\" color=\"textPrimary\">\r\n              &quot;{user.tag}&quot; kirjautunut\r\n          </Typography>\r\n        } */}\r\n        {/* {!user || user.guest \r\n          ?\r\n          null\r\n          :\r\n          <Button color=\"inherit\" onClick={() => removeUser()} component={Link} to=\"/\">\r\n            Kirjaudu ulos\r\n          </Button>\r\n        } */}\r\n      </Toolbar>\r\n    </AppBar>\r\n  )\r\n}\r\n\r\nexport default Menu","import React, { useState, useEffect } from \"react\"\r\nimport { TextField, Button, } from \"@material-ui/core\"\r\nimport { useMutation } from \"@apollo/client\"\r\nimport { ADD_USER } from \"../queries\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nconst RegisterForm = () => {\r\n  const [username, setUsername] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [confirmation, setConfirmation] = useState(\"\")\r\n  const [tag, setTag] = useState(\"\")\r\n  const history = useHistory()\r\n\r\n  const [addUser, addedResult] = useMutation(ADD_USER, {\r\n    onError: err => {\r\n      console.log(err.graphQLErrors[0].message)\r\n      window.alert(err.graphQLErrors[0].message)\r\n    }\r\n  })\r\n\r\n  const onSubmit = event => {\r\n    event.preventDefault()\r\n\r\n    const user = { username, password, tag }\r\n    addUser({ variables: { user } })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (addedResult.data) {\r\n      setUsername(\"\")\r\n      setPassword(\"\")\r\n      setTag(\"\")\r\n\r\n      window.alert(\"Käyttäjä luotu onnistuneesti.\")\r\n      history.push(\"/\")\r\n    }\r\n  }, [addedResult.data, history])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Luo uusi käyttäjä</h2>\r\n      <form onSubmit={onSubmit}>\r\n        <div>\r\n          <TextField\r\n            label=\"Käyttäjänimi\"\r\n            onChange={e => {setUsername(e.target.value)}}\r\n            error={username.length !== 0 && username.length < 2}\r\n            helperText={\r\n              username.length !== 0 && username.length < 2\r\n                ? \"Liian lyhyt\"\r\n                : \"Käyttäjänimesi ei näy muille pelaajille.\"\r\n            }\r\n            required={true}\r\n          />\r\n        </div>\r\n        <div>\r\n          <TextField\r\n            label=\"Pelinimi\"\r\n            onChange={e => {setTag(e.target.value)}}\r\n            helperText=\"Nimi joka näkyy muille pelaajille.\"\r\n            required={true}\r\n          />\r\n        </div>\r\n        <div>\r\n          <TextField\r\n            label=\"Salasana\"\r\n            type=\"password\"\r\n            onChange={e => {setPassword(e.target.value)}}\r\n            error={password.length < 8 && password !== \"\"}\r\n            helperText={\r\n              password.length < 8 && password !== \"\"\r\n                ? \"Liian lyhyt\"\r\n                : null\r\n            }\r\n            required={true}\r\n          />\r\n          <div\r\n            style={{\r\n              paddingTop: 20,\r\n              paddingBottom: 10,\r\n            }}\r\n          >\r\n            <strong>Älä käytä samaa salasanaa, joka sinulla on muilla nettisivuilla. </strong>\r\n            Olen vain opiskelija, ja tämä on ensimmäinen nettiprojektini, joten en voi taata sivuston tietoturvallisuutta.\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <TextField\r\n            label=\"Salasana uudelleen\"\r\n            type=\"password\"\r\n            onChange={e => {setConfirmation(e.target.value)}}\r\n            error={confirmation !== password}\r\n            helperText={confirmation !== password ? \"Salasanat eivät vastaa toisiaan.\" : null}\r\n            required={true}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n            Luo käyttäjä\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RegisterForm","import React, { useState, useEffect } from \"react\"\r\nimport { Button, Link } from \"@material-ui/core\"\r\nimport { useMutation } from \"@apollo/client\"\r\nimport { CREATE_GAME } from \"../queries\"\r\nimport { useUser } from \"../utils/stateHooks\"\r\n\r\nconst GameMenu = () => {\r\n  const [link, setLink] = useState(null)\r\n  const { user } = useUser()\r\n  const [createGame, createResult] = useMutation(CREATE_GAME, {\r\n    onError: err => {\r\n      if (!err.graphQLErrors || !err.graphQLErrors[0]) {\r\n        console.log(err.message)\r\n      } else {\r\n        console.log(err.graphQLErrors[0].message)\r\n      }\r\n    }\r\n  })\r\n\r\n  const newGame = () => {\r\n    if (!user) {\r\n      console.log(\"Sinun täytyy kirjautua ennen kuin pelaat\")\r\n    } else {\r\n      createGame()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (createResult.data) {\r\n      const { id } = createResult.data.createGame\r\n      setLink(`${window.location}/${id}`)\r\n    }\r\n  }, [createResult.data])\r\n\r\n  return (\r\n    <div>\r\n      <Button variant=\"contained\" onClick={newGame}>\r\n        Peli linkin kautta\r\n      </Button>\r\n      {link\r\n        ?\r\n        <div>\r\n          Jaa tämä linkki kaverillesi. Sen kautta pääset pelaamaan.{\"  \"}\r\n          <Link href={link}>\r\n            {link}\r\n          </Link>\r\n        </div>\r\n        :\r\n        null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GameMenu","import React, { useState } from \"react\"\r\n//import { SQUARE_HEIGHT, SQUARE_WIDTH } from \"../globals\"\r\nimport blackKing from \"../../sprites/blackking.svg\"\r\nimport blackQueen from \"../../sprites/blackqueen.svg\"\r\nimport blackRook from \"../../sprites/blackrook.svg\"\r\nimport blackBishop from \"../../sprites/blackbishop.svg\"\r\nimport blackKnight from \"../../sprites/blackknight.svg\"\r\nimport blackPawn from \"../../sprites/blackpawn.svg\"\r\nimport whiteKing from \"../../sprites/whiteking.svg\"\r\nimport whiteQueen from \"../../sprites/whitequeen.svg\"\r\nimport whiteRook from \"../../sprites/whiterook.svg\"\r\nimport whiteBishop from \"../../sprites/whitebishop.svg\"\r\nimport whiteKnight from \"../../sprites/whiteknight.svg\"\r\nimport whitePawn from \"../../sprites/whitepawn.svg\"\r\n\r\n/* const BLACK_COLOR = \"#000000\"\r\nconst WHITE_COLOR = \"#ffffff\" */\r\n\r\nconst pieceStyle = {\r\n  width: 65,\r\n  height: 65,\r\n  //display: \"table-cell\",\r\n  verticalAlign: \"middle\",\r\n}\r\nexport const getImgSrc = (type, side) => {\r\n  if (type === \"king\" && side === \"black\") {\r\n    return blackKing\r\n  } else if (type === \"queen\" && side === \"black\") {\r\n    return blackQueen\r\n  } else if (type === \"bishop\" && side === \"black\") {\r\n    return blackBishop\r\n  } else if (type === \"rook\" && side === \"black\") {\r\n    return blackRook\r\n  } else if (type === \"knight\" && side === \"black\") {\r\n    return blackKnight\r\n  } else if (type === \"pawn\" && side === \"black\") {\r\n    return blackPawn\r\n  } else if (type === \"king\" && side === \"white\") {\r\n    return whiteKing\r\n  } else if (type === \"queen\" && side === \"white\") {\r\n    return whiteQueen\r\n  } else if (type === \"bishop\" && side === \"white\") {\r\n    return whiteBishop\r\n  } else if (type === \"rook\" && side === \"white\") {\r\n    return whiteRook\r\n  } else if (type === \"knight\" && side === \"white\") {\r\n    return whiteKnight\r\n  } else if (type === \"pawn\" && side === \"white\") {\r\n    return whitePawn\r\n  }\r\n}\r\n\r\nlet dragged\r\n\r\n\r\n\r\n// functionality of a piece\r\n\r\nconst Piece = ({ style, id, side, type }) => {\r\n  const [opacity,/*  setOpacity */] = useState(1)\r\n\r\n  /* const handleDragStart = event => {\r\n    // dragged määritellään\r\n    dragged = event.target\r\n    setOpacity(0.5)\r\n    console.log(\"dragged:\", dragged)\r\n  }\r\n\r\n  const handleDragEnd = event => {\r\n    setOpacity(1)\r\n  } */\r\n\r\n\r\n  return (\r\n    <img\r\n      style={{ ...style, opacity }}\r\n      className=\"piece\"\r\n      draggable=\"false\"\r\n      /* onDragStart={handleDragStart}\r\n      onDragEnd={handleDragEnd} */\r\n      type={id}\r\n      side={side}\r\n      id={id}\r\n      src={getImgSrc(type, side)}\r\n      alt=\"sprite\"\r\n    >\r\n    </img>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n// pieces\r\n\r\nconst King = ({ side, id }) => {\r\n  const kingStyle = { ...pieceStyle }\r\n\r\n  return (\r\n    <Piece style={kingStyle} id={id} side={side} type=\"king\">\r\n      K\r\n    </Piece>\r\n  )\r\n}\r\n\r\nconst Queen = ({ side, id }) => {\r\n  const queenStyle = { ...pieceStyle }\r\n\r\n  return (\r\n    <Piece style={queenStyle} id={id} side={side} type=\"queen\">\r\n      D\r\n    </Piece>\r\n  )\r\n}\r\n\r\nconst Rook = ({ side, id }) => {\r\n  const rookStyle = { ...pieceStyle }\r\n\r\n  return (\r\n    <Piece style={rookStyle} id={id} side={side} type=\"rook\">\r\n      T\r\n    </Piece>\r\n  )\r\n}\r\n\r\nconst Knight = ({ side, id }) => {\r\n  const knightStyle = { ...pieceStyle }\r\n\r\n  return (\r\n    <Piece style={knightStyle} id={id} side={side} type=\"knight\">\r\n      R\r\n    </Piece>\r\n  )\r\n}\r\n\r\nconst Bishop = ({ side, id }) => {\r\n  const bishopStyle = { ...pieceStyle }\r\n\r\n  return (\r\n    <Piece style={bishopStyle} id={id} side={side} type=\"bishop\">\r\n      L\r\n    </Piece>\r\n  )\r\n}\r\n\r\nconst Pawn = ({ side, id }) => {\r\n  const pawnStyle = { ...pieceStyle }\r\n\r\n  return (\r\n    <Piece style={pawnStyle} id={id} side={side} type=\"pawn\">\r\n      S\r\n    </Piece>\r\n  )\r\n}\r\n\r\n/*Piece.displayName = \"Piece\"\r\nKing.displayName = \"King\"\r\nQueen.displayName = \"Queen\"\r\nRook.displayName = \"Rook\"\r\nKnight.displayName = \"Knight\"\r\nBishop.displayName = \"Bishop\"\r\nPawn.displayName = \"Pawn\"*/\r\n\r\nexport { King, Queen, Rook, Knight, Bishop, Pawn, dragged }","import React, { useState, useEffect, useMemo } from \"react\"\r\nimport {\r\n  SQUARE_SIZE,\r\n  BLACKSQUARE_COLOR,\r\n  WHITESQUARE_COLOR,\r\n  HIGHLIGHTED_COLOR,\r\n} from \"../../utils/constants\"\r\nimport { King, Queen, Rook, Knight, Bishop, Pawn } from \"./pieces\"\r\n\r\n// a single chess square\r\n\r\nconst Square = ({ color, makeMove, location, piece, dragHelperMap, id, highlight }) => {\r\n  const specificColor = useMemo(() => `rgb(${color === \"white\" ? WHITESQUARE_COLOR : BLACKSQUARE_COLOR})`, [color])\r\n  const [squareColor, setSquareColor] = useState(specificColor)\r\n  useEffect(() => {\r\n    if (highlight) {\r\n      setSquareColor(`rgb(${HIGHLIGHTED_COLOR})`)\r\n    } else {\r\n      setSquareColor(specificColor)\r\n    }\r\n  }, [highlight, specificColor])\r\n\r\n  //squarestyles\r\n  const squareStyle = {\r\n    height: SQUARE_SIZE,\r\n    width: SQUARE_SIZE,\r\n    backgroundColor: squareColor,\r\n    textAlign: \"center\",\r\n    background: `radial-gradient(${squareColor}, ${specificColor})`,\r\n  }\r\n  //console.log(squareStyle)\r\n\r\n\r\n  // drop handlers\r\n\r\n  /* const handleDrop = async event => {\r\n    event.preventDefault()\r\n\r\n    const piece = {\r\n      type: dragHelperMap.get(Number(dragged.id)).type,\r\n      side: dragHelperMap.get(Number(dragged.id)).side\r\n    }\r\n    const oldLocation = {\r\n      row: Math.floor(Number(dragged.id) / 8),\r\n      column: Number(dragged.id) % 8\r\n    }\r\n    const newLocation = location\r\n\r\n    if (event.target.className === \"square\") {\r\n      setSquareColor(specificColor)\r\n    } else if (event.target.className === \"piece\") {\r\n      setSquareColor(specificColor)\r\n    }\r\n\r\n    try {\r\n      const res = await makeMove({ piece, oldLocation, newLocation })\r\n      if (!res.data.makeMove.lastMove.success) {\r\n        console.log(res.data.makeMove.lastMove.message)\r\n      }\r\n    } catch (exception) {\r\n      console.log(exception.message)\r\n    }\r\n  }\r\n\r\n  const handleDragEnter = event => {\r\n    if (event.target.className === \"square\") {\r\n      setSquareColor(HIGHLIGHTED_COLOR)\r\n    } else if (event.target.className === \"piece\") {\r\n      setSquareColor(HIGHLIGHTED_COLOR)\r\n    }\r\n  }\r\n\r\n  const handleDragLeave = event => {\r\n    if (event.target.className === \"square\" && event.relatedTarget.className !== \"piece\") {\r\n      if (event.target.id === \"white\") {\r\n        setSquareColor(specificColor)\r\n      } else {\r\n        setSquareColor(specificColor)\r\n      }\r\n    } else if (event.target.className === \"piece\" && event.relatedTarget.className !== \"square\") {\r\n      if (event.target.parentNode.id === \"white\") {\r\n        setSquareColor(specificColor)\r\n      } else {\r\n        setSquareColor(specificColor)\r\n      }\r\n    }\r\n  } */\r\n\r\n  let pieceToRender\r\n\r\n  if (piece) {\r\n    switch(piece.type) {\r\n\r\n    case \"pawn\":\r\n      pieceToRender = <Pawn side={piece.side} id={8 * location.row + location.column} />\r\n      break\r\n    case \"rook\":\r\n      pieceToRender = <Rook side={piece.side} id={8 * location.row + location.column} />\r\n      break\r\n    case \"knight\":\r\n      pieceToRender = <Knight side={piece.side} id={8 * location.row + location.column} />\r\n      break\r\n    case \"bishop\":\r\n      pieceToRender = <Bishop side={piece.side} id={8 * location.row + location.column} />\r\n      break\r\n    case \"queen\":\r\n      pieceToRender = <Queen side={piece.side} id={8 * location.row + location.column} />\r\n      break\r\n    case \"king\":\r\n      pieceToRender = <King side={piece.side} id={8 * location.row + location.column} />\r\n      break\r\n    default:\r\n      pieceToRender = null\r\n    }\r\n  }\r\n\r\n\r\n  //---------------------------------\r\n  if (pieceToRender) {\r\n    return (\r\n      <td\r\n        id={id}\r\n        style={squareStyle}\r\n        className=\"square\"\r\n        /* onDragLeave={handleDragLeave} */\r\n        /* onDragOver={event => {event.preventDefault()}} */\r\n        /* onDrop={handleDrop}\r\n        onDragEnter={handleDragEnter} */\r\n      >\r\n        {pieceToRender}\r\n      </td>\r\n    )\r\n  }\r\n  return (\r\n    <td\r\n      id={id}\r\n      style={squareStyle}\r\n      className=\"square\"\r\n      /* onDragLeave={handleDragLeave}\r\n      onDragOver={event => {event.preventDefault()}} */\r\n      /* onDrop={handleDrop}\r\n      onDragEnter={handleDragEnter} */\r\n    />\r\n  )\r\n}\r\n\r\nexport default Square","export const SQUARE_SIZE= 70\r\n\r\nexport const WHITESQUARE_COLOR = \"29, 240, 201\"\r\nexport const BLACKSQUARE_COLOR = \"25, 145, 123\"\r\nexport const HIGHLIGHTED_COLOR = \"17, 209, 97\"\r\n\r\nexport const baseUrl = \"\"","import React from \"react\"\r\nimport Square from \"./Square\"\r\nimport { SQUARE_SIZE } from \"../../utils/constants\"\r\n\r\n// Chessboard\r\n\r\nconst Board = ({ boardAlignment, board, makeMove, handleClick, chosenPiece }) => {\r\n\r\n  const dragHelperMap = new Map()\r\n  board.forEach((row, i) => {\r\n    row.forEach((piece, j) => {\r\n      dragHelperMap.set(8 * i + j, piece)\r\n    })\r\n  })\r\n\r\n  const squares = Array.from(Array(8), (e, i) => {\r\n    const row = new Array(8)\r\n\r\n    for (let j = 0; j < 8; j++) {\r\n      if ((i + j) % 2 === 0) {\r\n        row[j] = { piece: null, color: \"white\"}\r\n      } else {\r\n        row[j] = { piece: null, color: \"black\"}\r\n      }\r\n    }\r\n\r\n    return row\r\n  })\r\n\r\n  const boardStyle = {\r\n    height: SQUARE_SIZE * 8,\r\n    width: SQUARE_SIZE * 8,\r\n    borderStyle: \"solid\",\r\n    borderColor: \"black\",\r\n    borderWidth: \"2px\",\r\n    background: \"cyan\",\r\n  }\r\n\r\n  //conschece)osenol.log(ePi\r\n\r\n  return (\r\n    <table\r\n      className=\"board\"\r\n      onClick={handleClick}\r\n      cellSpacing=\"0\"\r\n      style={boardStyle}\r\n    >\r\n      <tbody>\r\n        {boardAlignment === \"white\" ? board.map((row, i) => {\r\n          return (\r\n            <tr key={i}>\r\n              <td>{8 - i}</td>\r\n              {\r\n                row.map((piece, j) => {\r\n                  let highlight = false\r\n                  if (chosenPiece) {\r\n                    chosenPiece.availableMoves.forEach(move => {\r\n                      if (move.newLocation.row === i && move.newLocation.column === j) {\r\n                        highlight = true\r\n                      }\r\n                    })\r\n                    if (chosenPiece.location.row === i && chosenPiece.location.column === j) {\r\n                      highlight = true\r\n                    }\r\n                  }\r\n                  return <Square\r\n                    key={8 * i + j}\r\n                    id={8 * i + j}\r\n                    color={squares[i][j].color}\r\n                    makeMove={makeMove}\r\n                    location={{ row: i, column: j }}\r\n                    piece={piece}\r\n                    dragHelperMap={dragHelperMap}\r\n                    highlight={highlight}\r\n                  />\r\n                })\r\n              }\r\n            </tr>\r\n          )\r\n        }) : board.map((row, i) => {\r\n          return (\r\n            <tr key={i}>\r\n              <td>{i + 1}</td>\r\n              {\r\n                row.map((piece, j) => {\r\n                  let highlight = false\r\n                  if (chosenPiece) {\r\n                    chosenPiece.availableMoves.forEach(move => {\r\n                      if (move.newLocation.row === 7 - i && move.newLocation.column === 7 - j) {\r\n                        highlight = true\r\n                      }\r\n                    })\r\n                    if (chosenPiece.location.row === 7 - i && chosenPiece.location.column === 7 - j) {\r\n                      highlight = true\r\n                    }\r\n                  }\r\n                  return <Square\r\n                    key={8 * (7 - i) + (7 - j)}\r\n                    id={8 * (7 - i) + (7 - j)}\r\n                    color={squares[7 - i][7 - j].color}\r\n                    makeMove={makeMove}\r\n                    location={{ row: (7 - i), column: (7 - j) }}\r\n                    piece={board[7 - i][7 - j]}\r\n                    dragHelperMap={dragHelperMap}\r\n                    highlight={highlight}\r\n                  />\r\n                })\r\n              }\r\n            </tr>\r\n          )\r\n        })}\r\n        {boardAlignment === \"white\" \r\n          ?\r\n          <tr>\r\n            <td></td>\r\n            <td>A</td>\r\n            <td>B</td>\r\n            <td>C</td>\r\n            <td>D</td>\r\n            <td>E</td>\r\n            <td>F</td>\r\n            <td>G</td>\r\n            <td>H</td>\r\n          </tr>\r\n          :\r\n          <tr>\r\n            <td></td>\r\n            <td>H</td>\r\n            <td>G</td>\r\n            <td>F</td>\r\n            <td>E</td>\r\n            <td>D</td>\r\n            <td>C</td>\r\n            <td>B</td>\r\n            <td>A</td>\r\n          </tr>\r\n        }\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nexport default Board","import React from \"react\"\r\nimport { useUser } from \"../../utils/stateHooks\"\r\nimport { Button, Paper, makeStyles } from \"@material-ui/core\"\r\nimport { WHITESQUARE_COLOR, BLACKSQUARE_COLOR } from \"../../utils/constants\"\r\n\r\nconst useStyles = makeStyles({\r\n  turnText: {\r\n    background: `linear-gradient(135deg, rgb(${WHITESQUARE_COLOR}), rgb(${BLACKSQUARE_COLOR}))`,\r\n    padding: 10,\r\n    height: \"8vh\",\r\n    width: \"40vh\",\r\n    textAlign: \"center\"\r\n  }\r\n})\r\n\r\nconst GameText = ({game: { check, currentPlayer, gameOver, promotionPlayerID, winner }, promote }) => {\r\n  const { user, userLoading } = useUser()\r\n  const classes = useStyles()\r\n\r\n  if (userLoading) {\r\n    return \"loading...\"\r\n  }\r\n\r\n  return (\r\n    <div className=\"gameText\">\r\n      {user.id === currentPlayer && !gameOver\r\n        ? \r\n        <Paper className={classes.turnText}>\r\n          <h2>\r\n            On sinun vuorosi. {check && check.threatenedPlayer === user.id\r\n              ? \"Shakki!\"\r\n              : null}\r\n          </h2>\r\n        </Paper>\r\n        :\r\n        <Paper className={classes.turnText}>\r\n          Odotetaan vastustajan siirtoa. {check && check.threatenedPlayer !== user.id\r\n            ? \"Shakki!\"\r\n            : null}\r\n        </Paper>}\r\n      <div>\r\n        {\r\n          user.id === promotionPlayerID\r\n            ?\r\n            <div>\r\n              Valitse nappula, joksi haluat muuttaa sotilaan{\" \"}\r\n              <Button onClick={() => promote(\"queen\")}>\r\n                Kuningatar\r\n              </Button>\r\n              <Button onClick={() => promote(\"knight\")}>\r\n                Ratsu\r\n              </Button>\r\n            </div>\r\n            :\r\n            null\r\n        }\r\n      </div>\r\n      <h3>\r\n        {\r\n          gameOver\r\n            ? winner === user.id\r\n              ? \"Voitit pelin! Onneksi olkoon!\"\r\n              : \"Ootko paska ku hävisit :D\"\r\n            : null\r\n        }\r\n      </h3>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GameText","import React, { useState } from \"react\"\r\nimport { getImgSrc } from \"./pieces\"\r\nimport { Button, makeStyles, Typography, Paper } from \"@material-ui/core\"\r\nimport { WHITESQUARE_COLOR, BLACKSQUARE_COLOR } from \"../../utils/constants\"\r\n\r\nconst getLocation = (location) => {\r\n  if (location.column === 0) {\r\n    return `A${8 - (location.row)}`\r\n  }\r\n  if (location.column === 1) {\r\n    return `B${8 - (location.row)}`\r\n  }\r\n  if (location.column === 2) {\r\n    return `C${8 - (location.row)}`\r\n  }\r\n  if (location.column === 3) {\r\n    return `D${8 - (location.row)}`\r\n  }\r\n  if (location.column === 4) {\r\n    return `E${8 - (location.row)}`\r\n  }\r\n  if (location.column === 5) {\r\n    return `F${8 - (location.row)}`\r\n  }\r\n  if (location.column === 6) {\r\n    return `G${8 - (location.row)}`\r\n  }\r\n  if (location.column === 7) {\r\n    return `H${8 - (location.row)}`\r\n  } else {\r\n    return \"ErrorLocation\"\r\n  }\r\n}\r\n\r\n/* const useStyles = makeStyles({\r\n  moves: {\r\n    background: `rgb(${WHITESQUARE_COLOR})`,\r\n  }\r\n}) */\r\n\r\nconst Move = ({ move, emphasize }) => {\r\n  const emphasizeStyle = {\r\n    borderLeftStyle: \"solid\",\r\n    borderColor: \"blue\",\r\n    borderWidth: \"1px\",\r\n    borderLeftWidth: \"10px\",\r\n\r\n    padding: 10,\r\n    background: \"cyan\",\r\n  }\r\n  const moveStyle = {\r\n    borderLeftStyle: \"solid\",\r\n    borderColor: \"blue\",\r\n    borderWidth: \"1px\",\r\n    borderLeftWidth: \"5px\",\r\n\r\n    margin: 5,\r\n    background: \"cyan\"\r\n  }\r\n  const pieceStyle = emphasize ? {\r\n    height: 60,\r\n    width: 60,\r\n  } : undefined\r\n\r\n  if (move.__typename === \"OrdinaryMove\") {\r\n    return (\r\n      <Paper style={emphasize ? emphasizeStyle : moveStyle}>\r\n        <img\r\n          style={pieceStyle}\r\n          className=\"piece\"\r\n          draggable=\"false\"\r\n          src={getImgSrc(move.piece.type, move.piece.side)}\r\n          alt={move.piece.type}\r\n        />\r\n        {getLocation(move.newLocation)}\r\n      </Paper>\r\n    )\r\n  }\r\n  if (move.__typename === \"CastlingMove\") {\r\n    return (\r\n      <Paper style={emphasize ? emphasizeStyle : moveStyle}>\r\n        Tornitus\r\n      </Paper>\r\n    )\r\n  }\r\n  if (move.__typename === \"PromotionMove\") {\r\n    return (\r\n      <Paper style={emphasize ? emphasizeStyle : moveStyle}>\r\n        {getLocation(move.promotedPiece.location)}\r\n        <img\r\n          style={pieceStyle}\r\n          className=\"piece\"\r\n          draggable=\"false\"\r\n          src={getImgSrc(move.promotedPiece.type, move.promotedPiece.side)}\r\n          alt={move.promotedPiece.type}\r\n        />\r\n        {\"--->\"}\r\n        <img\r\n          style={pieceStyle}\r\n          className=\"piece\"\r\n          draggable=\"false\"\r\n          src={getImgSrc(move.promotedTo, move.promotedPiece.side)}\r\n          alt={move.promotedPiece.type}\r\n        />\r\n      </Paper>\r\n    )\r\n  }\r\n  return (\r\n    <Paper>\r\n      Error\r\n    </Paper>\r\n  )\r\n}\r\n\r\nconst MoveHistory = ({ moveHistory }) => {\r\n  const moveHistoryStyle = {\r\n    overflowY: \"scroll\",\r\n    height: 350,\r\n  }\r\n  return (\r\n    <div className=\"moveHistory\" style={moveHistoryStyle}>\r\n      {moveHistory.map((move, index) => {\r\n\r\n        move = moveHistory[moveHistory.length - 1 - index]\r\n        \r\n        // other moves\r\n        if (index !== 0) {\r\n          return <Move move={move} key={index} />\r\n        } else {\r\n          return null\r\n        }\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst LastMove = ({ moveHistory }) => {\r\n  const [showAll, setShowAll] = useState(false)\r\n  const style = {\r\n    background: `linear-gradient(135deg, rgb(${WHITESQUARE_COLOR}), rgb(${BLACKSQUARE_COLOR}))`,\r\n    padding: \"20px\",\r\n    /* height: \"auto\", */\r\n    /* margin: \"2vh\" */\r\n  }\r\n\r\n  if (moveHistory.length === 0) {\r\n    return (\r\n      <div>\r\n        Siirtoja ei ole tehty\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const lastMove = moveHistory[moveHistory.length - 1]\r\n\r\n  return (\r\n    <Paper style={style}>\r\n      <Typography variant=\"h5\">\r\n        Viimeisin siirto\r\n      </Typography>\r\n      <Move move={lastMove} emphasize={true} />\r\n      <Button variant=\"contained\" onClick={() => setShowAll(!showAll)} color=\"primary\">\r\n        Näytä kaikki siirrot\r\n      </Button>\r\n      {showAll ? <MoveHistory moveHistory={moveHistory} /> : null}\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default LastMove","import { HIGHLIGHTED_COLOR, WHITESQUARE_COLOR, BLACKSQUARE_COLOR } from \"../../utils/constants\"\r\n\r\n// checks is the square is valid to move to\r\nexport const isNotValid = ({ squareNode, pieceToMove, clickedPiece, game, user }) => {\r\n  return (\r\n    squareNode.style.background !== `radial-gradient(rgb(${HIGHLIGHTED_COLOR}), rgb(${BLACKSQUARE_COLOR}))` &&\r\n    squareNode.style.background !== `radial-gradient(rgb(${HIGHLIGHTED_COLOR}), rgb(${WHITESQUARE_COLOR}))`\r\n  ) || \r\n  (\r\n    clickedPiece &&\r\n    clickedPiece.id === pieceToMove.id\r\n  ) ||\r\n  (\r\n    game.gameOver ||\r\n    game.promotionPlayerID\r\n  ) ||\r\n  (\r\n    user.id !== game.currentPlayer\r\n  )\r\n}\r\n\r\n// checks if the piece is valid for movement\r\nexport const isValidPiece = ({ clickedPiece, game, user }) => {\r\n  /* console.log(clickedPiece)\r\n  console.log(game)\r\n  console.log(user) */\r\n  /* console.log(\"user.id === game.currentPlayer\", user.id === game.currentPlayer)\r\n  console.log(\"clickedPiece.side === game.whitePlayer === user.id ? white : black\",clickedPiece.side === (game.whitePlayer === user.id ? \"white\" : \"black\"))\r\n  console.log(\"!game.promotionPlayerID\",!game.promotionPlayerID)\r\n  console.log(\"!game.gameOver\",!game.gameOver) */\r\n  return (\r\n    user.id === game.currentPlayer &&\r\n    clickedPiece.side === (game.whitePlayer === user.id ? \"white\" : \"black\")\r\n  ) &&\r\n  (\r\n    !game.promotionPlayerID &&\r\n    !game.gameOver\r\n  )\r\n}","import React from \"react\"\r\nimport { Paper, Button } from \"@material-ui/core\"\r\nimport { WHITESQUARE_COLOR, BLACKSQUARE_COLOR } from \"../../utils/constants\"\r\n\r\nconst GameButtons = ({ skipTurn, disabled }) => {\r\n  const style = {\r\n    background: `linear-gradient(135deg, rgb(${WHITESQUARE_COLOR}), rgb(${BLACKSQUARE_COLOR}))`,\r\n    padding: \"20px\",\r\n  }\r\n\r\n  return (\r\n    <Paper style={style}>\r\n      <Button\r\n        variant=\"outlined\"\r\n        size=\"small\"\r\n        onClick={() => skipTurn()}\r\n        disabled={disabled}\r\n      >\r\n        Ohita vuoro\r\n      </Button>\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default GameButtons","import React, { useState } from \"react\"\r\nimport { useGame, useUser } from \"../../utils/stateHooks\"\r\nimport { handleApolloError } from \"../../utils/errorHandlers\"\r\nimport Board from \"./Board\"\r\nimport GameText from \"./GameText\"\r\nimport LastMove from \"./LastMove\"\r\nimport { isNotValid, isValidPiece } from \"./gameUtils\"\r\nimport { Grid, makeStyles } from \"@material-ui/core\"\r\nimport GameButtons from \"./GameButtons\"\r\n\r\nconst useStyles = makeStyles({\r\n  game: {\r\n    //overflowY: \"scroll\",\r\n  }\r\n})\r\n\r\nconst Game = () => {\r\n  const {game, gameLoading, gameError, makeMove, promote, skipTurn } = useGame()\r\n  const { user, userLoading } = useUser()\r\n  const [pieceToMove, setPieceToMove] = useState(null)\r\n  const classes = useStyles()\r\n\r\n  if (gameLoading || userLoading) {\r\n    return \"loading...\"\r\n  }\r\n  if (!game) {\r\n    return gameError.toString()\r\n  }\r\n  const {\r\n    board,\r\n    whitePlayer,\r\n    moveHistory,\r\n    currentPlayer,\r\n    promotionPlayerID,\r\n    check,\r\n    blackPlayer,\r\n  } = game\r\n\r\n  // handles a click on a piece or a square\r\n  const handleClick = async event => {\r\n    event.preventDefault()\r\n\r\n    let clickedElem = event.target\r\n\r\n    // the user clicked on a piece\r\n    if (clickedElem.className === \"piece\") {\r\n      const clickedPiece = board[Math.floor(Number(clickedElem.id) / 8)][Number(clickedElem.id) % 8]\r\n\r\n      if (pieceToMove) {\r\n        if (isNotValid({\r\n          squareNode: clickedElem.parentNode,\r\n          pieceToMove,\r\n          clickedPiece,\r\n          user,\r\n          game,\r\n        })) {\r\n          setPieceToMove(null)\r\n          return\r\n        }\r\n\r\n        const piece = { type: pieceToMove.type, side: pieceToMove.side }\r\n        const oldLocation = { row: pieceToMove.location.row, column: pieceToMove.location.column }\r\n        const newLocation = { row: clickedPiece.location.row, column: clickedPiece.location.column }\r\n\r\n        try {\r\n          const res = await makeMove({ piece, oldLocation, newLocation })\r\n          if (!res.data.makeMove.lastMove.success) {\r\n            console.log(res.data.makeMove.lastMove.message)\r\n          }\r\n        } catch (exception) {\r\n          handleApolloError(exception)\r\n        }\r\n        setPieceToMove(null)\r\n      } else if (isValidPiece({ clickedPiece, game, user })){\r\n        /* console.log(\"clickedPiece:\", clickedPiece) */\r\n        setPieceToMove(clickedPiece)\r\n      }\r\n\r\n      // the user clicked on a square\r\n    } else if (clickedElem.className === \"square\") {\r\n      const clickedPieceElem = clickedElem.firstChild\r\n      let clickedPiece\r\n      if (clickedPieceElem) {\r\n        clickedPiece = board[Math.floor(Number(clickedPieceElem.id) / 8)][Number(clickedPieceElem.id) % 8]\r\n      }\r\n\r\n      if (pieceToMove) {\r\n        //console.log(clickedElem)\r\n        if (isNotValid({\r\n          squareNode: clickedElem,\r\n          pieceToMove,\r\n          clickedPiece,\r\n          user,\r\n          game,\r\n        })) {\r\n          setPieceToMove(null)\r\n          return\r\n        }\r\n\r\n        const piece = { type: pieceToMove.type, side: pieceToMove.side }\r\n        const oldLocation = { row: pieceToMove.location.row, column: pieceToMove.location.column }\r\n        const newLocation = { row: Math.floor(Number(clickedElem.id) / 8), column: Number(clickedElem.id) % 8 }\r\n\r\n        try {\r\n          const res = await makeMove({ piece, oldLocation, newLocation })\r\n          if (!res.data.makeMove.lastMove.success) {\r\n            console.log(res.data.makeMove.lastMove.message)\r\n          }\r\n        } catch (exception) {\r\n          handleApolloError(exception)\r\n        }\r\n        setPieceToMove(null)\r\n      } else if (clickedPiece && isValidPiece({ clickedPiece, game, user })) {\r\n        setPieceToMove(clickedPiece)\r\n      }\r\n\r\n    } else {\r\n      setPieceToMove(null)\r\n    }\r\n  }\r\n\r\n  /* console.log(\"game rendered with board being:\", board) */\r\n\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"row\"\r\n      //alignItems=\"baseline\"\r\n      justify=\"center\"\r\n      className={classes.game}\r\n      spacing={2}\r\n      wrap=\"wrap\"\r\n    >\r\n      <Grid item xs={3} lg={2}>\r\n        <GameButtons\r\n          skipTurn={skipTurn}\r\n          disabled={\r\n            (user.id !== currentPlayer || promotionPlayerID !== null) || \r\n            (check !== null || (whitePlayer === null || blackPlayer === null))\r\n          }\r\n        />\r\n      </Grid>\r\n      <Grid\r\n        container\r\n        item\r\n        xs={10}\r\n        lg={6}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        //wrap=\"wrap\"\r\n      >\r\n        <Board\r\n          board={board}\r\n          boardAlignment={user.id === whitePlayer ? \"white\" : \"black\"}\r\n          makeMove={makeMove}\r\n          handleClick={handleClick}\r\n          chosenPiece={pieceToMove}\r\n        />\r\n        <GameText game={game} promote={promote} />\r\n      </Grid>\r\n      <Grid item xs={3} lg={3}>\r\n        <LastMove moveHistory={moveHistory} />\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default Game","import React from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport { Switch, Route } from \"react-router-dom\"\nimport Footer from \"./components/Footer\"\nimport LoginForm from \"./components/LoginForm\"\nimport Menu from \"./components/Menu\"\nimport RegisterForm from \"./components/RegisterForm\"\nimport GameMenu from \"./components/GameMenu\"\nimport Game from \"./components/chess/Game\"\nimport { useUser } from \"./utils/stateHooks\"\nimport { Container, makeStyles } from \"@material-ui/core\"\n\nconst useStyles = makeStyles({\n  root: {\n    height: \"100%\",\n  }\n})\n\nconst App = () => {\n  const { user } = useUser()\n  const classes = useStyles()\n\n  return (\n    <Container classes={classes}>\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        classes={classes}\n        wrap=\"nowrap\"\n      >\n        <Menu />\n        {user\n          ?\n          <Switch>\n            <Route path=\"/play/:id\">\n              <Game />\n            </Route>\n            <Route path=\"/play\">\n              <GameMenu />\n            </Route>\n            <Route path=\"/login\">\n              <LoginForm />\n            </Route>\n            <Route path=\"/register\">\n              <RegisterForm />\n            </Route>\n          </Switch>\n          : \"Ladataan...\"\n        }\n        <Footer />\n      </Grid>\n    </Container>\n  )\n}\n\nexport default App\n"],"sourceRoot":""}